!(function(e, t) {
  if ('object' == typeof exports && 'object' == typeof module)
    module.exports = t();
  else if ('function' == typeof define && define.amd) define([], t);
  else {
    var r = t();
    for (var n in r) ('object' == typeof exports ? exports : e)[n] = r[n];
  }
})(global, function() {
  return (function(e) {
    var t = {};
    function r(n) {
      if (t[n]) return t[n].exports;
      var i = (t[n] = { i: n, l: !1, exports: {} });
      return e[n].call(i.exports, i, i.exports, r), (i.l = !0), i.exports;
    }
    return (
      (r.m = e),
      (r.c = t),
      (r.d = function(e, t, n) {
        r.o(e, t) ||
          Object.defineProperty(e, t, {
            configurable: !1,
            enumerable: !0,
            get: n
          });
      }),
      (r.r = function(e) {
        Object.defineProperty(e, '__esModule', { value: !0 });
      }),
      (r.n = function(e) {
        var t =
          e && e.__esModule
            ? function() {
                return e.default;
              }
            : function() {
                return e;
              };
        return r.d(t, 'a', t), t;
      }),
      (r.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t);
      }),
      (r.p = ''),
      r((r.s = 34))
    );
  })([
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.ParserUtils = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(1);
      t.ParserUtils = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.util = new i.Util());
        }
        return (
          n(e, [
            {
              key: 'childByName',
              value: function(e, t) {
                var r = e.childNodes;
                for (var n in r) {
                  var i = r[n];
                  if (i.nodeName === t) return i;
                }
              }
            },
            {
              key: 'childrenByName',
              value: function(e, t) {
                var r = [],
                  n = e.childNodes;
                for (var i in n) {
                  var a = n[i];
                  a.nodeName === t && r.push(a);
                }
                return r;
              }
            },
            {
              key: 'resolveVastAdTagURI',
              value: function(e, t) {
                return t
                  ? 0 === e.indexOf('//')
                    ? '' + location.protocol + e
                    : -1 === e.indexOf('://')
                      ? t.slice(0, t.lastIndexOf('/')) + '/' + e
                      : e
                  : e;
              }
            },
            {
              key: 'parseBoolean',
              value: function(e) {
                return ['true', 'TRUE', '1'].includes(e);
              }
            },
            {
              key: 'parseNodeText',
              value: function(e) {
                return e && (e.textContent || e.text || '').trim();
              }
            },
            {
              key: 'copyNodeAttribute',
              value: function(e, t, r) {
                var n = t.getAttribute(e);
                n && r.setAttribute(e, n);
              }
            },
            {
              key: 'parseDuration',
              value: function(e) {
                if (null == e) return -1;
                if (this.util.isNumeric(e)) return parseInt(e);
                var t = e.split(':');
                if (3 !== t.length) return -1;
                var r = t[2].split('.'),
                  n = parseInt(r[0]);
                2 === r.length && (n += parseFloat('0.' + r[1]));
                var i = parseInt(60 * t[1]),
                  a = parseInt(60 * t[0] * 60);
                return isNaN(a) || isNaN(i) || isNaN(n) || i > 3600 || n > 60
                  ? -1
                  : a + i + n;
              }
            },
            {
              key: 'splitVAST',
              value: function(e) {
                var t = [],
                  r = null;
                return (
                  e.forEach(function(n, i) {
                    if (
                      (n.sequence && (n.sequence = parseInt(n.sequence, 10)),
                      n.sequence > 1)
                    ) {
                      var a = e[i - 1];
                      if (a && a.sequence === n.sequence - 1)
                        return void (r && r.push(n));
                      delete n.sequence;
                    }
                    (r = [n]), t.push(r);
                  }),
                  t
                );
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      var n = (function() {
        function e(e, t) {
          for (var r = 0; r < t.length; r++) {
            var n = t[r];
            (n.enumerable = n.enumerable || !1),
              (n.configurable = !0),
              'value' in n && (n.writable = !0),
              Object.defineProperty(e, n.key, n);
          }
        }
        return function(t, r, n) {
          return r && e(t.prototype, r), n && e(t, n), t;
        };
      })();
      t.Util = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
        }
        return (
          n(e, [
            {
              key: 'track',
              value: function(e, t) {
                this.resolveURLTemplates(e, t).forEach(function(e) {
                  'undefined' != typeof window &&
                    null !== window &&
                    (new Image().src = e);
                });
              }
            },
            {
              key: 'resolveURLTemplates',
              value: function(e) {
                var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {},
                  r = [];
                for (var n in (t.ASSETURI &&
                  (t.ASSETURI = this.encodeURIComponentRFC3986(t.ASSETURI)),
                t.CONTENTPLAYHEAD &&
                  (t.CONTENTPLAYHEAD = this.encodeURIComponentRFC3986(
                    t.CONTENTPLAYHEAD
                  )),
                t.ERRORCODE &&
                  !/^[0-9]{3}$/.test(t.ERRORCODE) &&
                  (t.ERRORCODE = 900),
                (t.CACHEBUSTING = this.leftpad(
                  Math.round(1e8 * Math.random()).toString()
                )),
                (t.TIMESTAMP = this.encodeURIComponentRFC3986(
                  new Date().toISOString()
                )),
                (t.RANDOM = t.random = t.CACHEBUSTING),
                e)) {
                  var i = e[n];
                  if (i) {
                    for (var a in t) {
                      var o = t[a],
                        s = '[' + a + ']',
                        u = '%%' + a + '%%';
                      i = (i = i.replace(s, o)).replace(u, o);
                    }
                    r.push(i);
                  }
                }
                return r;
              }
            },
            {
              key: 'encodeURIComponentRFC3986',
              value: function(e) {
                return encodeURIComponent(e).replace(/[!'()*]/g, function(e) {
                  return '%' + e.charCodeAt(0).toString(16);
                });
              }
            },
            {
              key: 'leftpad',
              value: function(e) {
                return e.length < 8
                  ? this.range(0, 8 - e.length, !1)
                      .map(function(e) {
                        return '0';
                      })
                      .join('') + e
                  : e;
              }
            },
            {
              key: 'range',
              value: function(e, t, r) {
                for (
                  var n = [], i = e < t, a = r ? (i ? t + 1 : t - 1) : t, o = e;
                  i ? o < a : o > a;
                  i ? o++ : o--
                )
                  n.push(o);
                return n;
              }
            },
            {
              key: 'isNumeric',
              value: function(e) {
                return !isNaN(parseFloat(e)) && isFinite(e);
              }
            },
            {
              key: 'flatten',
              value: function(e) {
                var t = this;
                return e.reduce(function(e, r) {
                  return e.concat(Array.isArray(r) ? t.flatten(r) : r);
                }, []);
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.Creative = function e() {
        var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.id = t.id || null),
          (this.adId = t.adId || null),
          (this.sequence = t.sequence || null),
          (this.apiFramework = t.apiFramework || null),
          (this.trackingEvents = {});
      };
    },
    function(e, t) {
      function r(e, t) {
        for (var r in e) t[r] = e[r];
      }
      function n(e, t) {
        var n = e.prototype;
        if (Object.create) {
          var i = Object.create(t.prototype);
          n.__proto__ = i;
        }
        if (!(n instanceof t)) {
          function a() {}
          (a.prototype = t.prototype),
            r(n, (a = new a())),
            (e.prototype = n = a);
        }
        n.constructor != e &&
          ('function' != typeof e && console.error('unknow Class:' + e),
          (n.constructor = e));
      }
      var i = 'http://www.w3.org/1999/xhtml',
        a = {},
        o = (a.ELEMENT_NODE = 1),
        s = (a.ATTRIBUTE_NODE = 2),
        u = (a.TEXT_NODE = 3),
        l = (a.CDATA_SECTION_NODE = 4),
        c = (a.ENTITY_REFERENCE_NODE = 5),
        p = (a.ENTITY_NODE = 6),
        h = (a.PROCESSING_INSTRUCTION_NODE = 7),
        f = (a.COMMENT_NODE = 8),
        d = (a.DOCUMENT_NODE = 9),
        m = (a.DOCUMENT_TYPE_NODE = 10),
        v = (a.DOCUMENT_FRAGMENT_NODE = 11),
        g = (a.NOTATION_NODE = 12),
        y = {},
        T = {},
        b = ((y.INDEX_SIZE_ERR = ((T[1] = 'Index size error'), 1)),
        (y.DOMSTRING_SIZE_ERR = ((T[2] = 'DOMString size error'), 2)),
        (y.HIERARCHY_REQUEST_ERR = ((T[3] = 'Hierarchy request error'), 3))),
        w = ((y.WRONG_DOCUMENT_ERR = ((T[4] = 'Wrong document'), 4)),
        (y.INVALID_CHARACTER_ERR = ((T[5] = 'Invalid character'), 5)),
        (y.NO_DATA_ALLOWED_ERR = ((T[6] = 'No data allowed'), 6)),
        (y.NO_MODIFICATION_ALLOWED_ERR = ((T[7] = 'No modification allowed'),
        7)),
        (y.NOT_FOUND_ERR = ((T[8] = 'Not found'), 8))),
        N = ((y.NOT_SUPPORTED_ERR = ((T[9] = 'Not supported'), 9)),
        (y.INUSE_ATTRIBUTE_ERR = ((T[10] = 'Attribute in use'), 10)));
      (y.INVALID_STATE_ERR = ((T[11] = 'Invalid state'), 11)),
        (y.SYNTAX_ERR = ((T[12] = 'Syntax error'), 12)),
        (y.INVALID_MODIFICATION_ERR = ((T[13] = 'Invalid modification'), 13)),
        (y.NAMESPACE_ERR = ((T[14] = 'Invalid namespace'), 14)),
        (y.INVALID_ACCESS_ERR = ((T[15] = 'Invalid access'), 15));
      function k(e, t) {
        if (t instanceof Error) var r = t;
        else
          (r = this),
            Error.call(this, T[e]),
            (this.message = T[e]),
            Error.captureStackTrace && Error.captureStackTrace(this, k);
        return (r.code = e), t && (this.message = this.message + ': ' + t), r;
      }
      function E() {}
      function R(e, t) {
        (this._node = e), (this._refresh = t), U(this);
      }
      function U(e) {
        var t = e._node._inc || e._node.ownerDocument._inc;
        if (e._inc != t) {
          var n = e._refresh(e._node);
          re(e, 'length', n.length), r(n, e), (e._inc = t);
        }
      }
      function C() {}
      function A(e, t) {
        for (var r = e.length; r--; ) if (e[r] === t) return r;
      }
      function x(e, t, r, n) {
        if ((n ? (t[A(t, n)] = r) : (t[t.length++] = r), e)) {
          r.ownerElement = e;
          var i = e.ownerDocument;
          i &&
            (n && P(i, e, n),
            (function(e, t, r) {
              e && e._inc++,
                'http://www.w3.org/2000/xmlns/' == r.namespaceURI &&
                  (t._nsMap[r.prefix ? r.localName : ''] = r.value);
            })(i, e, r));
        }
      }
      function L(e, t, r) {
        var n = A(t, r);
        if (!(n >= 0)) throw k(w, new Error(e.tagName + '@' + r));
        for (var i = t.length - 1; n < i; ) t[n] = t[++n];
        if (((t.length = i), e)) {
          var a = e.ownerDocument;
          a && (P(a, e, r), (r.ownerElement = null));
        }
      }
      function _(e) {
        if (((this._features = {}), e)) for (var t in e) this._features = e[t];
      }
      function S() {}
      function D(e) {
        return (
          ('<' == e ? '&lt;' : '>' == e && '&gt;') ||
          ('&' == e && '&amp;') ||
          ('"' == e && '&quot;') ||
          '&#' + e.charCodeAt() + ';'
        );
      }
      function O(e, t) {
        if (t(e)) return !0;
        if ((e = e.firstChild))
          do {
            if (O(e, t)) return !0;
          } while ((e = e.nextSibling));
      }
      function I() {}
      function P(e, t, r, n) {
        e && e._inc++,
          'http://www.w3.org/2000/xmlns/' == r.namespaceURI &&
            delete t._nsMap[r.prefix ? r.localName : ''];
      }
      function M(e, t, r) {
        if (e && e._inc) {
          e._inc++;
          var n = t.childNodes;
          if (r) n[n.length++] = r;
          else {
            for (var i = t.firstChild, a = 0; i; )
              (n[a++] = i), (i = i.nextSibling);
            n.length = a;
          }
        }
      }
      function j(e, t) {
        var r = t.previousSibling,
          n = t.nextSibling;
        return (
          r ? (r.nextSibling = n) : (e.firstChild = n),
          n ? (n.previousSibling = r) : (e.lastChild = r),
          M(e.ownerDocument, e),
          t
        );
      }
      function F(e, t, r) {
        var n = t.parentNode;
        if ((n && n.removeChild(t), t.nodeType === v)) {
          var i = t.firstChild;
          if (null == i) return t;
          var a = t.lastChild;
        } else i = a = t;
        var o = r ? r.previousSibling : e.lastChild;
        (i.previousSibling = o),
          (a.nextSibling = r),
          o ? (o.nextSibling = i) : (e.firstChild = i),
          null == r ? (e.lastChild = a) : (r.previousSibling = a);
        do {
          i.parentNode = e;
        } while (i !== a && (i = i.nextSibling));
        return (
          M(e.ownerDocument || e, e),
          t.nodeType == v && (t.firstChild = t.lastChild = null),
          t
        );
      }
      function B() {
        this._nsMap = {};
      }
      function V() {}
      function H() {}
      function q() {}
      function W() {}
      function X() {}
      function $() {}
      function Y() {}
      function Q() {}
      function z() {}
      function G() {}
      function Z() {}
      function J() {}
      function K(e, t) {
        var r = [],
          n = 9 == this.nodeType ? this.documentElement : this,
          i = n.prefix,
          a = n.namespaceURI;
        if (a && null == i && null == (i = n.lookupPrefix(a)))
          var o = [{ namespace: a, prefix: null }];
        return te(this, r, e, t, o), r.join('');
      }
      function ee(e, t, r) {
        var n = e.prefix || '',
          i = e.namespaceURI;
        if (!n && !i) return !1;
        if (
          ('xml' === n && 'http://www.w3.org/XML/1998/namespace' === i) ||
          'http://www.w3.org/2000/xmlns/' == i
        )
          return !1;
        for (var a = r.length; a--; ) {
          var o = r[a];
          if (o.prefix == n) return o.namespace != i;
        }
        return !0;
      }
      function te(e, t, r, n, a) {
        if (n) {
          if (!(e = n(e))) return;
          if ('string' == typeof e) return void t.push(e);
        }
        switch (e.nodeType) {
          case o:
            a || (a = []);
            a.length;
            var p = e.attributes,
              g = p.length,
              y = e.firstChild,
              T = e.tagName;
            (r = i === e.namespaceURI || r), t.push('<', T);
            for (var b = 0; b < g; b++) {
              'xmlns' == (w = p.item(b)).prefix
                ? a.push({ prefix: w.localName, namespace: w.value })
                : 'xmlns' == w.nodeName &&
                  a.push({ prefix: '', namespace: w.value });
            }
            for (b = 0; b < g; b++) {
              var w;
              if (ee((w = p.item(b)), 0, a)) {
                var N = w.prefix || '',
                  k = w.namespaceURI,
                  E = N ? ' xmlns:' + N : ' xmlns';
                t.push(E, '="', k, '"'), a.push({ prefix: N, namespace: k });
              }
              te(w, t, r, n, a);
            }
            if (ee(e, 0, a)) {
              (N = e.prefix || ''),
                (k = e.namespaceURI),
                (E = N ? ' xmlns:' + N : ' xmlns');
              t.push(E, '="', k, '"'), a.push({ prefix: N, namespace: k });
            }
            if (y || (r && !/^(?:meta|link|img|br|hr|input)$/i.test(T))) {
              if ((t.push('>'), r && /^script$/i.test(T)))
                for (; y; )
                  y.data ? t.push(y.data) : te(y, t, r, n, a),
                    (y = y.nextSibling);
              else for (; y; ) te(y, t, r, n, a), (y = y.nextSibling);
              t.push('</', T, '>');
            } else t.push('/>');
            return;
          case d:
          case v:
            for (y = e.firstChild; y; ) te(y, t, r, n, a), (y = y.nextSibling);
            return;
          case s:
            return t.push(' ', e.name, '="', e.value.replace(/[<&"]/g, D), '"');
          case u:
            return t.push(e.data.replace(/[<&]/g, D));
          case l:
            return t.push('<![CDATA[', e.data, ']]>');
          case f:
            return t.push('\x3c!--', e.data, '--\x3e');
          case m:
            var R = e.publicId,
              U = e.systemId;
            if ((t.push('<!DOCTYPE ', e.name), R))
              t.push(' PUBLIC "', R),
                U && '.' != U && t.push('" "', U),
                t.push('">');
            else if (U && '.' != U) t.push(' SYSTEM "', U, '">');
            else {
              var C = e.internalSubset;
              C && t.push(' [', C, ']'), t.push('>');
            }
            return;
          case h:
            return t.push('<?', e.target, ' ', e.data, '?>');
          case c:
            return t.push('&', e.nodeName, ';');
          default:
            t.push('??', e.nodeName);
        }
      }
      function re(e, t, r) {
        e[t] = r;
      }
      (k.prototype = Error.prototype),
        r(y, k),
        (E.prototype = {
          length: 0,
          item: function(e) {
            return this[e] || null;
          },
          toString: function(e, t) {
            for (var r = [], n = 0; n < this.length; n++) te(this[n], r, e, t);
            return r.join('');
          }
        }),
        (R.prototype.item = function(e) {
          return U(this), this[e];
        }),
        n(R, E),
        (C.prototype = {
          length: 0,
          item: E.prototype.item,
          getNamedItem: function(e) {
            for (var t = this.length; t--; ) {
              var r = this[t];
              if (r.nodeName == e) return r;
            }
          },
          setNamedItem: function(e) {
            var t = e.ownerElement;
            if (t && t != this._ownerElement) throw new k(N);
            var r = this.getNamedItem(e.nodeName);
            return x(this._ownerElement, this, e, r), r;
          },
          setNamedItemNS: function(e) {
            var t,
              r = e.ownerElement;
            if (r && r != this._ownerElement) throw new k(N);
            return (
              (t = this.getNamedItemNS(e.namespaceURI, e.localName)),
              x(this._ownerElement, this, e, t),
              t
            );
          },
          removeNamedItem: function(e) {
            var t = this.getNamedItem(e);
            return L(this._ownerElement, this, t), t;
          },
          removeNamedItemNS: function(e, t) {
            var r = this.getNamedItemNS(e, t);
            return L(this._ownerElement, this, r), r;
          },
          getNamedItemNS: function(e, t) {
            for (var r = this.length; r--; ) {
              var n = this[r];
              if (n.localName == t && n.namespaceURI == e) return n;
            }
            return null;
          }
        }),
        (_.prototype = {
          hasFeature: function(e, t) {
            var r = this._features[e.toLowerCase()];
            return !(!r || (t && !(t in r)));
          },
          createDocument: function(e, t, r) {
            var n = new I();
            if (
              ((n.implementation = this),
              (n.childNodes = new E()),
              (n.doctype = r),
              r && n.appendChild(r),
              t)
            ) {
              var i = n.createElementNS(e, t);
              n.appendChild(i);
            }
            return n;
          },
          createDocumentType: function(e, t, r) {
            var n = new $();
            return (
              (n.name = e),
              (n.nodeName = e),
              (n.publicId = t),
              (n.systemId = r),
              n
            );
          }
        }),
        (S.prototype = {
          firstChild: null,
          lastChild: null,
          previousSibling: null,
          nextSibling: null,
          attributes: null,
          parentNode: null,
          childNodes: null,
          ownerDocument: null,
          nodeValue: null,
          namespaceURI: null,
          prefix: null,
          localName: null,
          insertBefore: function(e, t) {
            return F(this, e, t);
          },
          replaceChild: function(e, t) {
            this.insertBefore(e, t), t && this.removeChild(t);
          },
          removeChild: function(e) {
            return j(this, e);
          },
          appendChild: function(e) {
            return this.insertBefore(e, null);
          },
          hasChildNodes: function() {
            return null != this.firstChild;
          },
          cloneNode: function(e) {
            return (function e(t, r, n) {
              var i = new r.constructor();
              for (var a in r) {
                var u = r[a];
                'object' != typeof u && u != i[a] && (i[a] = u);
              }
              r.childNodes && (i.childNodes = new E());
              i.ownerDocument = t;
              switch (i.nodeType) {
                case o:
                  var l = r.attributes,
                    c = (i.attributes = new C()),
                    p = l.length;
                  c._ownerElement = i;
                  for (var h = 0; h < p; h++)
                    i.setAttributeNode(e(t, l.item(h), !0));
                  break;
                case s:
                  n = !0;
              }
              if (n)
                for (var f = r.firstChild; f; )
                  i.appendChild(e(t, f, n)), (f = f.nextSibling);
              return i;
            })(this.ownerDocument || this, this, e);
          },
          normalize: function() {
            for (var e = this.firstChild; e; ) {
              var t = e.nextSibling;
              t && t.nodeType == u && e.nodeType == u
                ? (this.removeChild(t), e.appendData(t.data))
                : (e.normalize(), (e = t));
            }
          },
          isSupported: function(e, t) {
            return this.ownerDocument.implementation.hasFeature(e, t);
          },
          hasAttributes: function() {
            return this.attributes.length > 0;
          },
          lookupPrefix: function(e) {
            for (var t = this; t; ) {
              var r = t._nsMap;
              if (r) for (var n in r) if (r[n] == e) return n;
              t = t.nodeType == s ? t.ownerDocument : t.parentNode;
            }
            return null;
          },
          lookupNamespaceURI: function(e) {
            for (var t = this; t; ) {
              var r = t._nsMap;
              if (r && e in r) return r[e];
              t = t.nodeType == s ? t.ownerDocument : t.parentNode;
            }
            return null;
          },
          isDefaultNamespace: function(e) {
            return null == this.lookupPrefix(e);
          }
        }),
        r(a, S),
        r(a, S.prototype),
        (I.prototype = {
          nodeName: '#document',
          nodeType: d,
          doctype: null,
          documentElement: null,
          _inc: 1,
          insertBefore: function(e, t) {
            if (e.nodeType == v) {
              for (var r = e.firstChild; r; ) {
                var n = r.nextSibling;
                this.insertBefore(r, t), (r = n);
              }
              return e;
            }
            return (
              null == this.documentElement &&
                e.nodeType == o &&
                (this.documentElement = e),
              F(this, e, t),
              (e.ownerDocument = this),
              e
            );
          },
          removeChild: function(e) {
            return (
              this.documentElement == e && (this.documentElement = null),
              j(this, e)
            );
          },
          importNode: function(e, t) {
            return (function e(t, r, n) {
              var i;
              switch (r.nodeType) {
                case o:
                  (i = r.cloneNode(!1)).ownerDocument = t;
                case v:
                  break;
                case s:
                  n = !0;
              }
              i || (i = r.cloneNode(!1));
              i.ownerDocument = t;
              i.parentNode = null;
              if (n)
                for (var a = r.firstChild; a; )
                  i.appendChild(e(t, a, n)), (a = a.nextSibling);
              return i;
            })(this, e, t);
          },
          getElementById: function(e) {
            var t = null;
            return (
              O(this.documentElement, function(r) {
                if (r.nodeType == o && r.getAttribute('id') == e)
                  return (t = r), !0;
              }),
              t
            );
          },
          createElement: function(e) {
            var t = new B();
            return (
              (t.ownerDocument = this),
              (t.nodeName = e),
              (t.tagName = e),
              (t.childNodes = new E()),
              ((t.attributes = new C())._ownerElement = t),
              t
            );
          },
          createDocumentFragment: function() {
            var e = new G();
            return (e.ownerDocument = this), (e.childNodes = new E()), e;
          },
          createTextNode: function(e) {
            var t = new q();
            return (t.ownerDocument = this), t.appendData(e), t;
          },
          createComment: function(e) {
            var t = new W();
            return (t.ownerDocument = this), t.appendData(e), t;
          },
          createCDATASection: function(e) {
            var t = new X();
            return (t.ownerDocument = this), t.appendData(e), t;
          },
          createProcessingInstruction: function(e, t) {
            var r = new Z();
            return (
              (r.ownerDocument = this),
              (r.tagName = r.target = e),
              (r.nodeValue = r.data = t),
              r
            );
          },
          createAttribute: function(e) {
            var t = new V();
            return (
              (t.ownerDocument = this),
              (t.name = e),
              (t.nodeName = e),
              (t.localName = e),
              (t.specified = !0),
              t
            );
          },
          createEntityReference: function(e) {
            var t = new z();
            return (t.ownerDocument = this), (t.nodeName = e), t;
          },
          createElementNS: function(e, t) {
            var r = new B(),
              n = t.split(':'),
              i = (r.attributes = new C());
            return (
              (r.childNodes = new E()),
              (r.ownerDocument = this),
              (r.nodeName = t),
              (r.tagName = t),
              (r.namespaceURI = e),
              2 == n.length
                ? ((r.prefix = n[0]), (r.localName = n[1]))
                : (r.localName = t),
              (i._ownerElement = r),
              r
            );
          },
          createAttributeNS: function(e, t) {
            var r = new V(),
              n = t.split(':');
            return (
              (r.ownerDocument = this),
              (r.nodeName = t),
              (r.name = t),
              (r.namespaceURI = e),
              (r.specified = !0),
              2 == n.length
                ? ((r.prefix = n[0]), (r.localName = n[1]))
                : (r.localName = t),
              r
            );
          }
        }),
        n(I, S),
        (B.prototype = {
          nodeType: o,
          hasAttribute: function(e) {
            return null != this.getAttributeNode(e);
          },
          getAttribute: function(e) {
            var t = this.getAttributeNode(e);
            return (t && t.value) || '';
          },
          getAttributeNode: function(e) {
            return this.attributes.getNamedItem(e);
          },
          setAttribute: function(e, t) {
            var r = this.ownerDocument.createAttribute(e);
            (r.value = r.nodeValue = '' + t), this.setAttributeNode(r);
          },
          removeAttribute: function(e) {
            var t = this.getAttributeNode(e);
            t && this.removeAttributeNode(t);
          },
          appendChild: function(e) {
            return e.nodeType === v
              ? this.insertBefore(e, null)
              : (function(e, t) {
                  var r = t.parentNode;
                  if (r) {
                    var n = e.lastChild;
                    r.removeChild(t), (n = e.lastChild);
                  }
                  return (
                    (n = e.lastChild),
                    (t.parentNode = e),
                    (t.previousSibling = n),
                    (t.nextSibling = null),
                    n ? (n.nextSibling = t) : (e.firstChild = t),
                    (e.lastChild = t),
                    M(e.ownerDocument, e, t),
                    t
                  );
                })(this, e);
          },
          setAttributeNode: function(e) {
            return this.attributes.setNamedItem(e);
          },
          setAttributeNodeNS: function(e) {
            return this.attributes.setNamedItemNS(e);
          },
          removeAttributeNode: function(e) {
            return this.attributes.removeNamedItem(e.nodeName);
          },
          removeAttributeNS: function(e, t) {
            var r = this.getAttributeNodeNS(e, t);
            r && this.removeAttributeNode(r);
          },
          hasAttributeNS: function(e, t) {
            return null != this.getAttributeNodeNS(e, t);
          },
          getAttributeNS: function(e, t) {
            var r = this.getAttributeNodeNS(e, t);
            return (r && r.value) || '';
          },
          setAttributeNS: function(e, t, r) {
            var n = this.ownerDocument.createAttributeNS(e, t);
            (n.value = n.nodeValue = '' + r), this.setAttributeNode(n);
          },
          getAttributeNodeNS: function(e, t) {
            return this.attributes.getNamedItemNS(e, t);
          },
          getElementsByTagName: function(e) {
            return new R(this, function(t) {
              var r = [];
              return (
                O(t, function(n) {
                  n === t ||
                    n.nodeType != o ||
                    ('*' !== e && n.tagName != e) ||
                    r.push(n);
                }),
                r
              );
            });
          },
          getElementsByTagNameNS: function(e, t) {
            return new R(this, function(r) {
              var n = [];
              return (
                O(r, function(i) {
                  i === r ||
                    i.nodeType !== o ||
                    ('*' !== e && i.namespaceURI !== e) ||
                    ('*' !== t && i.localName != t) ||
                    n.push(i);
                }),
                n
              );
            });
          }
        }),
        (I.prototype.getElementsByTagName = B.prototype.getElementsByTagName),
        (I.prototype.getElementsByTagNameNS =
          B.prototype.getElementsByTagNameNS),
        n(B, S),
        (V.prototype.nodeType = s),
        n(V, S),
        (H.prototype = {
          data: '',
          substringData: function(e, t) {
            return this.data.substring(e, e + t);
          },
          appendData: function(e) {
            (e = this.data + e),
              (this.nodeValue = this.data = e),
              (this.length = e.length);
          },
          insertData: function(e, t) {
            this.replaceData(e, 0, t);
          },
          appendChild: function(e) {
            throw new Error(T[b]);
          },
          deleteData: function(e, t) {
            this.replaceData(e, t, '');
          },
          replaceData: function(e, t, r) {
            (r = this.data.substring(0, e) + r + this.data.substring(e + t)),
              (this.nodeValue = this.data = r),
              (this.length = r.length);
          }
        }),
        n(H, S),
        (q.prototype = {
          nodeName: '#text',
          nodeType: u,
          splitText: function(e) {
            var t = this.data,
              r = t.substring(e);
            (t = t.substring(0, e)),
              (this.data = this.nodeValue = t),
              (this.length = t.length);
            var n = this.ownerDocument.createTextNode(r);
            return (
              this.parentNode &&
                this.parentNode.insertBefore(n, this.nextSibling),
              n
            );
          }
        }),
        n(q, H),
        (W.prototype = { nodeName: '#comment', nodeType: f }),
        n(W, H),
        (X.prototype = { nodeName: '#cdata-section', nodeType: l }),
        n(X, H),
        ($.prototype.nodeType = m),
        n($, S),
        (Y.prototype.nodeType = g),
        n(Y, S),
        (Q.prototype.nodeType = p),
        n(Q, S),
        (z.prototype.nodeType = c),
        n(z, S),
        (G.prototype.nodeName = '#document-fragment'),
        (G.prototype.nodeType = v),
        n(G, S),
        (Z.prototype.nodeType = h),
        n(Z, S),
        (J.prototype.serializeToString = function(e, t, r) {
          return K.call(e, t, r);
        }),
        (S.prototype.toString = K);
      try {
        if (Object.defineProperty) {
          Object.defineProperty(R.prototype, 'length', {
            get: function() {
              return U(this), this.$$length;
            }
          }),
            Object.defineProperty(S.prototype, 'textContent', {
              get: function() {
                return (function e(t) {
                  switch (t.nodeType) {
                    case o:
                    case v:
                      var r = [];
                      for (t = t.firstChild; t; )
                        7 !== t.nodeType && 8 !== t.nodeType && r.push(e(t)),
                          (t = t.nextSibling);
                      return r.join('');
                    default:
                      return t.nodeValue;
                  }
                })(this);
              },
              set: function(e) {
                switch (this.nodeType) {
                  case o:
                  case v:
                    for (; this.firstChild; ) this.removeChild(this.firstChild);
                    (e || String(e)) &&
                      this.appendChild(this.ownerDocument.createTextNode(e));
                    break;
                  default:
                    (this.data = e), (this.value = e), (this.nodeValue = e);
                }
              }
            }),
            (re = function(e, t, r) {
              e['$$' + t] = r;
            });
        }
      } catch (e) {}
      (t.DOMImplementation = _), (t.XMLSerializer = J);
    },
    function(e, t) {
      e.exports = require('events');
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.NonLinearAd = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.id = null),
          (this.width = 0),
          (this.height = 0),
          (this.expandedWidth = 0),
          (this.expandedHeight = 0),
          (this.scalable = !0),
          (this.maintainAspectRatio = !0),
          (this.minSuggestedDuration = 0),
          (this.apiFramework = 'static'),
          (this.type = null),
          (this.staticResource = null),
          (this.htmlResource = null),
          (this.iframeResource = null),
          (this.nonlinearClickThroughURLTemplate = null),
          (this.nonlinearClickTrackingURLTemplates = []),
          (this.adParameters = null);
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.CreativeLinear = void 0);
      var n = r(2);
      t.CreativeLinear = (function(e) {
        function t() {
          var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, t);
          var r = (function(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ('object' != typeof t && 'function' != typeof t)
              ? e
              : t;
          })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
          return (
            (r.type = 'linear'),
            (r.duration = 0),
            (r.skipDelay = null),
            (r.mediaFiles = []),
            (r.videoClickThroughURLTemplate = null),
            (r.videoClickTrackingURLTemplates = []),
            (r.videoCustomClickURLTemplates = []),
            (r.adParameters = null),
            (r.icons = []),
            r
          );
        }
        return (
          (function(e, t) {
            if ('function' != typeof t && null !== t)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          })(t, n.Creative),
          t
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.CompanionAd = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.id = null),
          (this.width = 0),
          (this.height = 0),
          (this.type = null),
          (this.staticResource = null),
          (this.htmlResource = null),
          (this.iframeResource = null),
          (this.altText = null),
          (this.companionClickThroughURLTemplate = null),
          (this.companionClickTrackingURLTemplates = []),
          (this.trackingEvents = {});
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.VASTParser = void 0);
      var n =
          Object.assign ||
          function(e) {
            for (var t = 1; t < arguments.length; t++) {
              var r = arguments[t];
              for (var n in r)
                Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);
            }
            return e;
          },
        i = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        a = r(33),
        o = r(4),
        s = r(0),
        u = r(22),
        l = r(1),
        c = r(12);
      var p = { ERRORCODE: 900, extensions: [] };
      t.VASTParser = (function(e) {
        function t() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, t);
          var e = (function(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ('object' != typeof t && 'function' != typeof t)
              ? e
              : t;
          })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
          return (
            (e.remainingAds = []),
            (e.parentURLs = []),
            (e.errorURLTemplates = []),
            (e.rootErrorURLTemplates = []),
            (e.maxWrapperDepth = null),
            (e.URLTemplateFilters = []),
            (e.fetchingOptions = {}),
            (e.parserUtils = new s.ParserUtils()),
            (e.adParser = new a.AdParser()),
            (e.util = new l.Util()),
            e
          );
        }
        return (
          (function(e, t) {
            if ('function' != typeof t && null !== t)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          })(t, o.EventEmitter),
          i(t, [
            {
              key: 'addURLTemplateFilter',
              value: function(e) {
                'function' == typeof e && this.URLTemplateFilters.push(e);
              }
            },
            {
              key: 'removeURLTemplateFilter',
              value: function() {
                this.URLTemplateFilters.pop();
              }
            },
            {
              key: 'countURLTemplateFilters',
              value: function() {
                return this.URLTemplateFilters.length;
              }
            },
            {
              key: 'clearURLTemplateFilters',
              value: function() {
                this.URLTemplateFilters = [];
              }
            },
            {
              key: 'trackVastError',
              value: function(e, t) {
                for (
                  var r = arguments.length, i = Array(r > 2 ? r - 2 : 0), a = 2;
                  a < r;
                  a++
                )
                  i[a - 2] = arguments[a];
                this.emit('VAST-error', n.apply(void 0, [p, t].concat(i))),
                  this.util.track(e, t);
              }
            },
            {
              key: 'getErrorURLTemplates',
              value: function() {
                return this.rootErrorURLTemplates.concat(
                  this.errorURLTemplates
                );
              }
            },
            {
              key: 'fetchVAST',
              value: function(e) {
                var t = this;
                return new Promise(function(r, n) {
                  t.URLTemplateFilters.forEach(function(t) {
                    e = t(e);
                  }),
                    t.parentURLs.push(e),
                    t.emit('VAST-resolving', { url: e }),
                    t.urlHandler.get(e, t.fetchingOptions, function(i, a) {
                      t.emit('VAST-resolved', { url: e }), i ? n(i) : r(a);
                    });
                });
              }
            },
            {
              key: 'initParsingStatus',
              value: function() {
                var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {};
                (this.rootURL = ''),
                  (this.remainingAds = []),
                  (this.parentURLs = []),
                  (this.errorURLTemplates = []),
                  (this.rootErrorURLTemplates = []),
                  (this.maxWrapperDepth = e.wrapperLimit || 10),
                  (this.fetchingOptions = {
                    timeout: e.timeout,
                    withCredentials: e.withCredentials
                  }),
                  (this.urlHandler = e.urlhandler || new u.URLHandler());
              }
            },
            {
              key: 'getRemainingAds',
              value: function(e) {
                var t = this;
                return new Promise(function(r, n) {
                  0 === t.remainingAds.length &&
                    n(
                      new Error('No more ads are available for the given VAST')
                    );
                  var i = e
                    ? t.util.flatten(t.remainingAds)
                    : t.remainingAds.shift();
                  (t.errorURLTemplates = []),
                    (t.parentURLs = []),
                    t
                      .resolveAds(i, {
                        wrapperDepth: 0,
                        originalUrl: t.rootURL
                      })
                      .then(function(e) {
                        var n = t.buildVASTResponse(e);
                        r(n);
                      })
                      .catch(function(e) {
                        return n(e);
                      });
                });
              }
            },
            {
              key: 'getAndParseVAST',
              value: function(e) {
                var t = this,
                  r =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {};
                return (
                  this.initParsingStatus(r),
                  (this.rootURL = e),
                  new Promise(function(n, i) {
                    t
                      .fetchVAST(e)
                      .then(function(a) {
                        (r.originalUrl = e),
                          (r.isRootVAST = !0),
                          t
                            .parse(a, r)
                            .then(function(e) {
                              var r = t.buildVASTResponse(e);
                              n(r);
                            })
                            .catch(function(e) {
                              return i(e);
                            });
                      })
                      .catch(function(e) {
                        return i(e);
                      });
                  })
                );
              }
            },
            {
              key: 'parseVAST',
              value: function(e) {
                var t = this,
                  r =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {};
                return (
                  this.initParsingStatus(r),
                  new Promise(function(n, i) {
                    (r.isRootVAST = !0),
                      t
                        .parse(e, r)
                        .then(function(e) {
                          var r = t.buildVASTResponse(e);
                          n(r);
                        })
                        .catch(function(e) {
                          return i(e);
                        });
                  })
                );
              }
            },
            {
              key: 'buildVASTResponse',
              value: function(e) {
                var t = new c.VASTResponse();
                return (
                  (t.ads = e),
                  (t.errorURLTemplates = this.getErrorURLTemplates()),
                  this.completeWrapperResolving(t),
                  t
                );
              }
            },
            {
              key: 'parse',
              value: function(e, t) {
                var r = this,
                  n = t.resolveAll,
                  i = void 0 === n || n,
                  a = t.wrapperSequence,
                  o = void 0 === a ? null : a,
                  s = t.originalUrl,
                  u = void 0 === s ? null : s,
                  l = t.wrapperDepth,
                  c = void 0 === l ? 0 : l,
                  p = t.isRootVAST,
                  h = void 0 !== p && p;
                return new Promise(function(t, n) {
                  (e &&
                    e.documentElement &&
                    'VAST' === e.documentElement.nodeName) ||
                    n(new Error('Invalid VAST XMLDocument'));
                  var a = [],
                    s = e.documentElement.childNodes;
                  for (var l in s) {
                    var p = s[l];
                    if ('Error' === p.nodeName) {
                      var f = r.parserUtils.parseNodeText(p);
                      h
                        ? r.rootErrorURLTemplates.push(f)
                        : r.errorURLTemplates.push(f);
                    }
                    if ('Ad' === p.nodeName) {
                      var d = r.adParser.parse(p);
                      d
                        ? a.push(d)
                        : r.trackVastError(r.getErrorURLTemplates(), {
                            ERRORCODE: 101
                          });
                    }
                  }
                  var m = a.length,
                    v = a[m - 1];
                  1 === m &&
                    void 0 !== o &&
                    null !== o &&
                    v &&
                    !v.sequence &&
                    (v.sequence = o),
                    !1 === i &&
                      ((r.remainingAds = r.parserUtils.splitVAST(a)),
                      (a = r.remainingAds.shift())),
                    r
                      .resolveAds(a, {
                        resolveAll: i,
                        wrapperDepth: c,
                        originalUrl: u
                      })
                      .then(function(e) {
                        return t(e);
                      })
                      .catch(function(e) {
                        return n(e);
                      });
                });
              }
            },
            {
              key: 'resolveAds',
              value: function() {
                var e = this,
                  t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : [],
                  r = arguments[1],
                  n = r.wrapperDepth,
                  i = r.originalUrl;
                return new Promise(function(r, a) {
                  var o = [];
                  t.forEach(function(t) {
                    var r = e.resolveWrappers(t, n, i);
                    o.push(r);
                  }),
                    r(
                      Promise.all(o).then(function(t) {
                        return e.util.flatten(t);
                      })
                    );
                }).then(function(t) {
                  if (!t && e.remainingAds.length > 0) {
                    var r = e.remainingAds.shift();
                    return e.resolveAds(r, { wrapperDepth: n, originalUrl: i });
                  }
                  return t;
                });
              }
            },
            {
              key: 'resolveWrappers',
              value: function(e, t, r) {
                var n = this;
                return new Promise(function(i, a) {
                  t++,
                    e.nextWrapperURL || i(e),
                    (t >= n.maxWrapperDepth ||
                      n.parentURLs.includes(e.nextWrapperURL)) &&
                      ((e.errorCode = 302), delete e.nextWrapperURL, i(e)),
                    (e.nextWrapperURL = n.parserUtils.resolveVastAdTagURI(
                      e.nextWrapperURL,
                      r
                    ));
                  var o = e.sequence;
                  (r = e.nextWrapperURL),
                    n
                      .fetchVAST(e.nextWrapperURL)
                      .then(function(a) {
                        n
                          .parse(a, {
                            originalUrl: r,
                            wrapperSequence: o,
                            wrapperDepth: t
                          })
                          .then(function(t) {
                            delete e.nextWrapperURL,
                              0 === t.length && ((e.creatives = []), i(e)),
                              t.forEach(function(t) {
                                t && n.mergeWrapperAdData(t, e);
                              }),
                              i(t);
                          })
                          .catch(function(t) {
                            (e.errorCode = 301),
                              (e.errorMessage = t.message),
                              i(e);
                          });
                      })
                      .catch(function(e) {
                        return a(e);
                      });
                });
              }
            },
            {
              key: 'completeWrapperResolving',
              value: function(e) {
                if (0 === e.ads.length)
                  this.trackVastError(e.errorURLTemplates, { ERRORCODE: 303 });
                else
                  for (var t = e.ads.length - 1; t >= 0; t--) {
                    var r = e.ads[t];
                    (r.errorCode || 0 === r.creatives.length) &&
                      (this.trackVastError(
                        r.errorURLTemplates.concat(e.errorURLTemplates),
                        { ERRORCODE: r.errorCode || 303 },
                        { ERRORMESSAGE: r.errorMessage || '' },
                        { extensions: r.extensions },
                        { system: r.system }
                      ),
                      e.ads.splice(t, 1));
                  }
              }
            },
            {
              key: 'mergeWrapperAdData',
              value: function(e, t) {
                (e.errorURLTemplates = t.errorURLTemplates.concat(
                  e.errorURLTemplates
                )),
                  (e.impressionURLTemplates = t.impressionURLTemplates.concat(
                    e.impressionURLTemplates
                  )),
                  (e.extensions = t.extensions.concat(e.extensions)),
                  e.creatives.forEach(function(e) {
                    if (t.trackingEvents && t.trackingEvents[e.type])
                      for (var r in t.trackingEvents[e.type]) {
                        var n = t.trackingEvents[e.type][r];
                        e.trackingEvents[r] || (e.trackingEvents[r] = []),
                          (e.trackingEvents[r] = e.trackingEvents[r].concat(n));
                      }
                  }),
                  t.videoClickTrackingURLTemplates &&
                    t.videoClickTrackingURLTemplates.length &&
                    e.creatives.forEach(function(e) {
                      'linear' === e.type &&
                        (e.videoClickTrackingURLTemplates = e.videoClickTrackingURLTemplates.concat(
                          t.videoClickTrackingURLTemplates
                        ));
                    }),
                  t.videoCustomClickURLTemplates &&
                    t.videoCustomClickURLTemplates.length &&
                    e.creatives.forEach(function(e) {
                      'linear' === e.type &&
                        (e.videoCustomClickURLTemplates = e.videoCustomClickURLTemplates.concat(
                          t.videoCustomClickURLTemplates
                        ));
                    }),
                  t.videoClickThroughURLTemplate &&
                    e.creatives.forEach(function(e) {
                      'linear' === e.type &&
                        null == e.videoClickThroughURLTemplate &&
                        (e.videoClickThroughURLTemplate =
                          t.videoClickThroughURLTemplate);
                    });
              }
            }
          ]),
          t
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.VASTTracker = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(7),
        a = r(6),
        o = r(4),
        s = r(5),
        u = r(1);
      t.VASTTracker = (function(e) {
        function t(e, r, n) {
          var o =
            arguments.length > 3 && void 0 !== arguments[3]
              ? arguments[3]
              : null;
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, t);
          var l = (function(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ('object' != typeof t && 'function' != typeof t)
              ? e
              : t;
          })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
          for (var c in ((l.ad = r),
          (l.creative = n),
          (l.variation = o),
          (l.util = new u.Util()),
          (l.muted = !1),
          (l.impressed = !1),
          (l.skippable = !1),
          (l.skipDelayDefault = -1),
          (l.trackingEvents = {}),
          (l.emitAlwaysEvents = [
            'creativeView',
            'start',
            'firstQuartile',
            'midpoint',
            'thirdQuartile',
            'complete',
            'resume',
            'pause',
            'rewind',
            'skip',
            'closeLinear',
            'close'
          ]),
          (l._alreadyTriggeredQuartiles = {}),
          l.creative.trackingEvents)) {
            var p = l.creative.trackingEvents[c];
            l.trackingEvents[c] = p.slice(0);
          }
          return (
            l.creative instanceof a.CreativeLinear
              ? (l.setDuration(l.creative.duration),
                (l.skipDelay = l.creative.skipDelay),
                (l.linear = !0),
                (l.clickThroughURLTemplate =
                  l.creative.videoClickThroughURLTemplate),
                (l.clickTrackingURLTemplates =
                  l.creative.videoClickTrackingURLTemplates))
              : ((l.skipDelay = -1),
                (l.linear = !1),
                l.variation &&
                  (l.variation instanceof s.NonLinearAd
                    ? ((l.clickThroughURLTemplate =
                        l.variation.nonlinearClickThroughURLTemplate),
                      (l.clickTrackingURLTemplates =
                        l.variation.nonlinearClickTrackingURLTemplates))
                    : l.variation instanceof i.CompanionAd &&
                      ((l.clickThroughURLTemplate =
                        l.variation.companionClickThroughURLTemplate),
                      (l.clickTrackingURLTemplates =
                        l.variation.companionClickTrackingURLTemplates)))),
            e &&
              l.on('start', function() {
                e.lastSuccessfullAd = Date.now();
              }),
            l
          );
        }
        return (
          (function(e, t) {
            if ('function' != typeof t && null !== t)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          })(t, o.EventEmitter),
          n(t, [
            {
              key: 'setDuration',
              value: function(e) {
                (this.assetDuration = e),
                  (this.quartiles = {
                    firstQuartile: Math.round(25 * this.assetDuration) / 100,
                    midpoint: Math.round(50 * this.assetDuration) / 100,
                    thirdQuartile: Math.round(75 * this.assetDuration) / 100
                  });
              }
            },
            {
              key: 'setProgress',
              value: function(e) {
                var t = this,
                  r = this.skipDelay || this.skipDelayDefault;
                if (
                  (-1 === r ||
                    this.skippable ||
                    (r > e
                      ? this.emit('skip-countdown', r - e)
                      : ((this.skippable = !0),
                        this.emit('skip-countdown', 0))),
                  this.linear && this.assetDuration > 0)
                ) {
                  var n = [];
                  if (e > 0) {
                    var i = Math.round(e / this.assetDuration * 100);
                    for (var a in (n.push('start'),
                    n.push('progress-' + i + '%'),
                    n.push('progress-' + Math.round(e)),
                    this.quartiles))
                      this.isQuartileReached(a, this.quartiles[a], e) &&
                        (n.push(a), (this._alreadyTriggeredQuartiles[a] = !0));
                  }
                  n.forEach(function(e) {
                    t.track(e, !0);
                  }),
                    e < this.progress && this.track('rewind');
                }
                this.progress = e;
              }
            },
            {
              key: 'isQuartileReached',
              value: function(e, t, r) {
                var n = !1;
                return (
                  t <= r && !this._alreadyTriggeredQuartiles[e] && (n = !0), n
                );
              }
            },
            {
              key: 'setMuted',
              value: function(e) {
                this.muted !== e && this.track(e ? 'mute' : 'unmute'),
                  (this.muted = e);
              }
            },
            {
              key: 'setPaused',
              value: function(e) {
                this.paused !== e && this.track(e ? 'pause' : 'resume'),
                  (this.paused = e);
              }
            },
            {
              key: 'setFullscreen',
              value: function(e) {
                this.fullscreen !== e &&
                  this.track(e ? 'fullscreen' : 'exitFullscreen'),
                  (this.fullscreen = e);
              }
            },
            {
              key: 'setExpand',
              value: function(e) {
                this.expanded !== e && this.track(e ? 'expand' : 'collapse'),
                  (this.expanded = e);
              }
            },
            {
              key: 'setSkipDelay',
              value: function(e) {
                'number' == typeof e && (this.skipDelay = e);
              }
            },
            {
              key: 'trackImpression',
              value: function() {
                this.impressed ||
                  ((this.impressed = !0),
                  this.trackURLs(this.ad.impressionURLTemplates),
                  this.track('creativeView'));
              }
            },
            {
              key: 'errorWithCode',
              value: function(e) {
                this.trackURLs(this.ad.errorURLTemplates, { ERRORCODE: e });
              }
            },
            {
              key: 'complete',
              value: function() {
                this.track('complete');
              }
            },
            {
              key: 'close',
              value: function() {
                this.track(this.linear ? 'closeLinear' : 'close');
              }
            },
            {
              key: 'skip',
              value: function() {
                this.track('skip'), (this.trackingEvents = []);
              }
            },
            {
              key: 'click',
              value: function() {
                if (
                  (this.clickTrackingURLTemplates &&
                    this.clickTrackingURLTemplates.length &&
                    this.trackURLs(this.clickTrackingURLTemplates),
                  this.clickThroughURLTemplate)
                ) {
                  var e = this.linear
                      ? { CONTENTPLAYHEAD: this.progressFormatted() }
                      : {},
                    t = this.util.resolveURLTemplates(
                      [this.clickThroughURLTemplate],
                      e
                    )[0];
                  this.emit('clickthrough', t);
                }
              }
            },
            {
              key: 'track',
              value: function(e) {
                var t =
                  arguments.length > 1 &&
                  void 0 !== arguments[1] &&
                  arguments[1];
                'closeLinear' === e &&
                  !this.trackingEvents[e] &&
                  this.trackingEvents.close &&
                  (e = 'close');
                var r = this.trackingEvents[e],
                  n = this.emitAlwaysEvents.indexOf(e) > -1;
                r
                  ? (this.emit(e, ''), this.trackURLs(r))
                  : n && this.emit(e, ''),
                  t &&
                    (delete this.trackingEvents[e],
                    n &&
                      this.emitAlwaysEvents.splice(
                        this.emitAlwaysEvents.indexOf(e),
                        1
                      ));
              }
            },
            {
              key: 'trackURLs',
              value: function(e) {
                var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {};
                this.linear &&
                  (this.creative &&
                    this.creative.mediaFiles &&
                    this.creative.mediaFiles[0] &&
                    this.creative.mediaFiles[0].fileURL &&
                    (t.ASSETURI = this.creative.mediaFiles[0].fileURL),
                  (t.CONTENTPLAYHEAD = this.progressFormatted())),
                  this.util.track(e, t);
              }
            },
            {
              key: 'progressFormatted',
              value: function() {
                var e = parseInt(this.progress),
                  t = e / 3600;
                t.length < 2 && (t = '0' + t);
                var r = (e / 60) % 60;
                r.length < 2 && (r = '0' + r);
                var n = e % 60;
                return (
                  n.length < 2 && (n = '0' + r),
                  t +
                    ':' +
                    r +
                    ':' +
                    n +
                    '.' +
                    parseInt(100 * (this.progress - e))
                );
              }
            }
          ]),
          t
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      var n = (function() {
        function e(e, t) {
          for (var r = 0; r < t.length; r++) {
            var n = t[r];
            (n.enumerable = n.enumerable || !1),
              (n.configurable = !0),
              'value' in n && (n.writable = !0),
              Object.defineProperty(e, n.key, n);
          }
        }
        return function(t, r, n) {
          return r && e(t.prototype, r), n && e(t, n), t;
        };
      })();
      var i = null,
        a = {
          data: {},
          length: 0,
          getItem: function(e) {
            return this.data[e];
          },
          setItem: function(e, t) {
            (this.data[e] = t), (this.length = Object.keys(this.data).length);
          },
          removeItem: function(e) {
            delete data[e], (this.length = Object.keys(this.data).length);
          },
          clear: function() {
            (this.data = {}), (this.length = 0);
          }
        };
      t.Storage = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.storage = this.initStorage());
        }
        return (
          n(e, [
            {
              key: 'initStorage',
              value: function() {
                if (i) return i;
                try {
                  i =
                    'undefined' != typeof window && null !== window
                      ? window.localStorage || window.sessionStorage
                      : null;
                } catch (e) {
                  i = null;
                }
                return (i && !this.isStorageDisabled(i)) || (i = a).clear(), i;
              }
            },
            {
              key: 'isStorageDisabled',
              value: function(e) {
                var t = '__VASTStorage__';
                try {
                  if ((e.setItem(t, t), e.getItem(t) !== t))
                    return e.removeItem(t), !0;
                } catch (e) {
                  return !0;
                }
                return e.removeItem(t), !1;
              }
            },
            {
              key: 'getItem',
              value: function(e) {
                return this.storage.getItem(e);
              }
            },
            {
              key: 'setItem',
              value: function(e, t) {
                return this.storage.setItem(e, t);
              }
            },
            {
              key: 'removeItem',
              value: function(e) {
                return this.storage.removeItem(e);
              }
            },
            {
              key: 'clear',
              value: function() {
                return this.storage.clear();
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.VASTClient = void 0);
      var n =
          Object.assign ||
          function(e) {
            for (var t = 1; t < arguments.length; t++) {
              var r = arguments[t];
              for (var n in r)
                Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);
            }
            return e;
          },
        i = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        a = r(10),
        o = r(1),
        s = r(8);
      t.VASTClient = (function() {
        function e(t, r, n) {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.cappingFreeLunch = t || 0),
            (this.cappingMinimumTimeInterval = r || 0),
            (this.defaultOptions = { withCredentials: !1, timeout: 0 }),
            (this.vastParser = new s.VASTParser()),
            (this.util = new o.Util()),
            (this.storage = n || new a.Storage()),
            void 0 === this.lastSuccessfulAd && (this.lastSuccessfulAd = 0),
            void 0 === this.totalCalls && (this.totalCalls = 0),
            void 0 === this.totalCallsTimeout && (this.totalCallsTimeout = 0);
        }
        return (
          i(e, [
            {
              key: 'getParser',
              value: function() {
                return this.vastParser;
              }
            },
            {
              key: 'hasRemainingAds',
              value: function() {
                return this.vastParser.remainingAds.length > 0;
              }
            },
            {
              key: 'getNextAds',
              value: function(e) {
                return this.vastParser.getRemainingAds(e);
              }
            },
            {
              key: 'get',
              value: function(e) {
                var t = this,
                  r =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {},
                  i = Date.now();
                return (
                  (r = n(this.defaultOptions, r)).hasOwnProperty(
                    'resolveAll'
                  ) || (r.resolveAll = !1),
                  this.totalCallsTimeout < i
                    ? ((this.totalCalls = 1),
                      (this.totalCallsTimeout = i + 36e5))
                    : this.totalCalls++,
                  new Promise(function(n, a) {
                    t.cappingFreeLunch >= t.totalCalls &&
                      a(
                        new Error(
                          'VAST call canceled  FreeLunch capping not reached yet ' +
                            t.totalCalls +
                            '/' +
                            t.cappingFreeLunch
                        )
                      );
                    var o = i - t.lastSuccessfulAd;
                    o < 0
                      ? (t.lastSuccessfulAd = 0)
                      : o < t.cappingMinimumTimeInterval &&
                        a(
                          new Error(
                            'VAST call canceled  (' +
                              t.cappingMinimumTimeInterval +
                              ')ms minimum interval reached'
                          )
                        ),
                      t.vastParser
                        .getAndParseVAST(e, r)
                        .then(function(e) {
                          return n(e);
                        })
                        .catch(function(e) {
                          return a(e);
                        });
                  })
                );
              }
            },
            {
              key: 'lastSuccessfulAd',
              get: function() {
                return this.storage.getItem('vast-client-last-successful-ad');
              },
              set: function(e) {
                this.storage.setItem('vast-client-last-successful-ad', e);
              }
            },
            {
              key: 'totalCalls',
              get: function() {
                return this.storage.getItem('vast-client-total-calls');
              },
              set: function(e) {
                this.storage.setItem('vast-client-total-calls', e);
              }
            },
            {
              key: 'totalCallsTimeout',
              get: function() {
                return this.storage.getItem('vast-client-total-calls-timeout');
              },
              set: function(e) {
                this.storage.setItem('vast-client-total-calls-timeout', e);
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.VASTResponse = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.ads = []),
          (this.errorURLTemplates = []);
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      var n = (function() {
        function e(e, t) {
          for (var r = 0; r < t.length; r++) {
            var n = t[r];
            (n.enumerable = n.enumerable || !1),
              (n.configurable = !0),
              'value' in n && (n.writable = !0),
              Object.defineProperty(e, n.key, n);
          }
        }
        return function(t, r, n) {
          return r && e(t.prototype, r), n && e(t, n), t;
        };
      })();
      t.XHRURLHandler = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
        }
        return (
          n(e, [
            {
              key: 'xhr',
              value: function() {
                var e = new window.XMLHttpRequest();
                if ('withCredentials' in e) return e;
              }
            },
            {
              key: 'supported',
              value: function() {
                return !!this.xhr();
              }
            },
            {
              key: 'get',
              value: function(e, t, r) {
                if (
                  'https:' === window.location.protocol &&
                  0 === e.indexOf('http://')
                )
                  return r(
                    new Error('XHRURLHandler: Cannot go from HTTPS to HTTP.')
                  );
                try {
                  var n = this.xhr();
                  n.open('GET', e),
                    (n.timeout = t.timeout || 0),
                    (n.withCredentials = t.withCredentials || !1),
                    n.overrideMimeType && n.overrideMimeType('text/xml'),
                    (n.onreadystatechange = function() {
                      4 === n.readyState &&
                        (200 === n.status
                          ? r(null, n.responseXML)
                          : r(new Error('XHRURLHandler: ' + n.statusText)));
                    }),
                    n.send();
                } catch (e) {
                  r(new Error('XHRURLHandler: Unexpected error'));
                }
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t) {
      var r = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
        n = new RegExp(
          '[\\-\\.0-9' +
            r.source.slice(1, -1) +
            '\\u00B7\\u0300-\\u036F\\u203F-\\u2040]'
        ),
        i = new RegExp(
          '^' + r.source + n.source + '*(?::' + r.source + n.source + '*)?$'
        ),
        a = 0,
        o = 1,
        s = 2,
        u = 3,
        l = 4,
        c = 5,
        p = 6,
        h = 7;
      function f() {}
      function d(e, t) {
        return (
          (t.lineNumber = e.lineNumber), (t.columnNumber = e.columnNumber), t
        );
      }
      function m(e, t, r, n, i, f) {
        for (var d, m = ++t, v = a; ; ) {
          var g = e.charAt(m);
          switch (g) {
            case '=':
              if (v === o) (d = e.slice(t, m)), (v = u);
              else {
                if (v !== s)
                  throw new Error('attribute equal must after attrName');
                v = u;
              }
              break;
            case "'":
            case '"':
              if (v === u || v === o) {
                if (
                  (v === o &&
                    (f.warning('attribute value must after "="'),
                    (d = e.slice(t, m))),
                  (t = m + 1),
                  !((m = e.indexOf(g, t)) > 0))
                )
                  throw new Error("attribute value no end '" + g + "' match");
                (y = e.slice(t, m).replace(/&#?\w+;/g, i)),
                  r.add(d, y, t - 1),
                  (v = c);
              } else {
                if (v != l) throw new Error('attribute value must after "="');
                (y = e.slice(t, m).replace(/&#?\w+;/g, i)),
                  r.add(d, y, t),
                  f.warning(
                    'attribute "' + d + '" missed start quot(' + g + ')!!'
                  ),
                  (t = m + 1),
                  (v = c);
              }
              break;
            case '/':
              switch (v) {
                case a:
                  r.setTagName(e.slice(t, m));
                case c:
                case p:
                case h:
                  (v = h), (r.closed = !0);
                case l:
                case o:
                case s:
                  break;
                default:
                  throw new Error("attribute invalid close char('/')");
              }
              break;
            case '':
              return (
                f.error('unexpected end of input'),
                v == a && r.setTagName(e.slice(t, m)),
                m
              );
            case '>':
              switch (v) {
                case a:
                  r.setTagName(e.slice(t, m));
                case c:
                case p:
                case h:
                  break;
                case l:
                case o:
                  '/' === (y = e.slice(t, m)).slice(-1) &&
                    ((r.closed = !0), (y = y.slice(0, -1)));
                case s:
                  v === s && (y = d),
                    v == l
                      ? (f.warning('attribute "' + y + '" missed quot(")!!'),
                        r.add(d, y.replace(/&#?\w+;/g, i), t))
                      : (('http://www.w3.org/1999/xhtml' === n[''] &&
                          y.match(/^(?:disabled|checked|selected)$/i)) ||
                          f.warning(
                            'attribute "' +
                              y +
                              '" missed value!! "' +
                              y +
                              '" instead!!'
                          ),
                        r.add(y, y, t));
                  break;
                case u:
                  throw new Error('attribute value missed!!');
              }
              return m;
            case '':
              g = ' ';
            default:
              if (g <= ' ')
                switch (v) {
                  case a:
                    r.setTagName(e.slice(t, m)), (v = p);
                    break;
                  case o:
                    (d = e.slice(t, m)), (v = s);
                    break;
                  case l:
                    var y = e.slice(t, m).replace(/&#?\w+;/g, i);
                    f.warning('attribute "' + y + '" missed quot(")!!'),
                      r.add(d, y, t);
                  case c:
                    v = p;
                }
              else
                switch (v) {
                  case s:
                    r.tagName;
                    ('http://www.w3.org/1999/xhtml' === n[''] &&
                      d.match(/^(?:disabled|checked|selected)$/i)) ||
                      f.warning(
                        'attribute "' +
                          d +
                          '" missed value!! "' +
                          d +
                          '" instead2!!'
                      ),
                      r.add(d, d, t),
                      (t = m),
                      (v = o);
                    break;
                  case c:
                    f.warning('attribute space is required"' + d + '"!!');
                  case p:
                    (v = o), (t = m);
                    break;
                  case u:
                    (v = l), (t = m);
                    break;
                  case h:
                    throw new Error(
                      "elements closed character '/' and '>' must be connected to"
                    );
                }
          }
          m++;
        }
      }
      function v(e, t, r) {
        for (var n = e.tagName, i = null, a = e.length; a--; ) {
          var o = e[a],
            s = o.qName,
            u = o.value;
          if ((h = s.indexOf(':')) > 0)
            var l = (o.prefix = s.slice(0, h)),
              c = s.slice(h + 1),
              p = 'xmlns' === l && c;
          else (c = s), (l = null), (p = 'xmlns' === s && '');
          (o.localName = c),
            !1 !== p &&
              (null == i && ((i = {}), T(r, (r = {}))),
              (r[p] = i[p] = u),
              (o.uri = 'http://www.w3.org/2000/xmlns/'),
              t.startPrefixMapping(p, u));
        }
        for (a = e.length; a--; ) {
          (l = (o = e[a]).prefix) &&
            ('xml' === l && (o.uri = 'http://www.w3.org/XML/1998/namespace'),
            'xmlns' !== l && (o.uri = r[l || '']));
        }
        var h;
        (h = n.indexOf(':')) > 0
          ? ((l = e.prefix = n.slice(0, h)), (c = e.localName = n.slice(h + 1)))
          : ((l = null), (c = e.localName = n));
        var f = (e.uri = r[l || '']);
        if ((t.startElement(f, c, n, e), !e.closed))
          return (e.currentNSMap = r), (e.localNSMap = i), !0;
        if ((t.endElement(f, c, n), i)) for (l in i) t.endPrefixMapping(l);
      }
      function g(e, t, r, n, i) {
        if (/^(?:script|textarea)$/i.test(r)) {
          var a = e.indexOf('</' + r + '>', t),
            o = e.substring(t + 1, a);
          if (/[&<]/.test(o))
            return /^script$/i.test(r)
              ? (i.characters(o, 0, o.length), a)
              : ((o = o.replace(/&#?\w+;/g, n)),
                i.characters(o, 0, o.length),
                a);
        }
        return t + 1;
      }
      function y(e, t, r, n) {
        var i = n[r];
        return (
          null == i &&
            ((i = e.lastIndexOf('</' + r + '>')) < t &&
              (i = e.lastIndexOf('</' + r)),
            (n[r] = i)),
          i < t
        );
      }
      function T(e, t) {
        for (var r in e) t[r] = e[r];
      }
      function b(e, t, r, n) {
        switch (e.charAt(t + 2)) {
          case '-':
            return '-' === e.charAt(t + 3)
              ? (i = e.indexOf('--\x3e', t + 4)) > t
                ? (r.comment(e, t + 4, i - t - 4), i + 3)
                : (n.error('Unclosed comment'), -1)
              : -1;
          default:
            if ('CDATA[' == e.substr(t + 3, 6)) {
              var i = e.indexOf(']]>', t + 9);
              return (
                r.startCDATA(),
                r.characters(e, t + 9, i - t - 9),
                r.endCDATA(),
                i + 3
              );
            }
            var a = (function(e, t) {
                var r,
                  n = [],
                  i = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
                (i.lastIndex = t), i.exec(e);
                for (; (r = i.exec(e)); ) if ((n.push(r), r[1])) return n;
              })(e, t),
              o = a.length;
            if (o > 1 && /!doctype/i.test(a[0][0])) {
              var s = a[1][0],
                u = o > 3 && /^public$/i.test(a[2][0]) && a[3][0],
                l = o > 4 && a[4][0],
                c = a[o - 1];
              return (
                r.startDTD(
                  s,
                  u && u.replace(/^(['"])(.*?)\1$/, '$2'),
                  l && l.replace(/^(['"])(.*?)\1$/, '$2')
                ),
                r.endDTD(),
                c.index + c[0].length
              );
            }
        }
        return -1;
      }
      function w(e, t, r) {
        var n = e.indexOf('?>', t);
        if (n) {
          var i = e.substring(t, n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
          if (i) {
            i[0].length;
            return r.processingInstruction(i[1], i[2]), n + 2;
          }
          return -1;
        }
        return -1;
      }
      function N(e) {}
      function k(e, t) {
        return (e.__proto__ = t), e;
      }
      (f.prototype = {
        parse: function(e, t, r) {
          var n = this.domBuilder;
          n.startDocument(),
            T(t, (t = {})),
            (function(e, t, r, n, i) {
              function a(e) {
                var t = e.slice(1, -1);
                return t in r
                  ? r[t]
                  : '#' === t.charAt(0)
                    ? (function(e) {
                        if (e > 65535) {
                          var t = 55296 + ((e -= 65536) >> 10),
                            r = 56320 + (1023 & e);
                          return String.fromCharCode(t, r);
                        }
                        return String.fromCharCode(e);
                      })(parseInt(t.substr(1).replace('x', '0x')))
                    : (i.error('entity not found:' + e), e);
              }
              function o(t) {
                if (t > T) {
                  var r = e.substring(T, t).replace(/&#?\w+;/g, a);
                  p && s(T), n.characters(r, 0, t - T), (T = t);
                }
              }
              function s(t, r) {
                for (; t >= l && (r = c.exec(e)); )
                  (u = r.index), (l = u + r[0].length), p.lineNumber++;
                p.columnNumber = t - u + 1;
              }
              var u = 0,
                l = 0,
                c = /.*(?:\r\n?|\n)|.*$/g,
                p = n.locator,
                h = [{ currentNSMap: t }],
                f = {},
                T = 0;
              for (;;) {
                try {
                  var k = e.indexOf('<', T);
                  if (k < 0) {
                    if (!e.substr(T).match(/^\s*$/)) {
                      var E = n.doc,
                        R = E.createTextNode(e.substr(T));
                      E.appendChild(R), (n.currentElement = R);
                    }
                    return;
                  }
                  switch ((k > T && o(k), e.charAt(k + 1))) {
                    case '/':
                      var U = e.indexOf('>', k + 3),
                        C = e.substring(k + 2, U),
                        A = h.pop();
                      U < 0
                        ? ((C = e.substring(k + 2).replace(/[\s<].*/, '')),
                          i.error(
                            'end tag name: ' +
                              C +
                              ' is not complete:' +
                              A.tagName
                          ),
                          (U = k + 1 + C.length))
                        : C.match(/\s</) &&
                          ((C = C.replace(/[\s<].*/, '')),
                          i.error('end tag name: ' + C + ' maybe not complete'),
                          (U = k + 1 + C.length));
                      var x = A.localNSMap,
                        L = A.tagName == C,
                        _ =
                          L ||
                          (A.tagName &&
                            A.tagName.toLowerCase() == C.toLowerCase());
                      if (_) {
                        if ((n.endElement(A.uri, A.localName, C), x))
                          for (var S in x) n.endPrefixMapping(S);
                        L ||
                          i.fatalError(
                            'end tag name: ' +
                              C +
                              ' is not match the current start tagName:' +
                              A.tagName
                          );
                      } else h.push(A);
                      U++;
                      break;
                    case '?':
                      p && s(k), (U = w(e, k, n));
                      break;
                    case '!':
                      p && s(k), (U = b(e, k, n, i));
                      break;
                    default:
                      p && s(k);
                      var D = new N(),
                        O = h[h.length - 1].currentNSMap,
                        U = m(e, k, D, O, a, i),
                        I = D.length;
                      if (
                        (!D.closed &&
                          y(e, U, D.tagName, f) &&
                          ((D.closed = !0),
                          r.nbsp || i.warning('unclosed xml attribute')),
                        p && I)
                      ) {
                        for (var P = d(p, {}), M = 0; M < I; M++) {
                          var j = D[M];
                          s(j.offset), (j.locator = d(p, {}));
                        }
                        (n.locator = P),
                          v(D, n, O) && h.push(D),
                          (n.locator = p);
                      } else v(D, n, O) && h.push(D);
                      'http://www.w3.org/1999/xhtml' !== D.uri || D.closed
                        ? U++
                        : (U = g(e, U, D.tagName, a, n));
                  }
                } catch (e) {
                  i.error('element parse error: ' + e), (U = -1);
                }
                U > T ? (T = U) : o(Math.max(k, T) + 1);
              }
            })(e, t, r, n, this.errorHandler),
            n.endDocument();
        }
      }),
        (N.prototype = {
          setTagName: function(e) {
            if (!i.test(e)) throw new Error('invalid tagName:' + e);
            this.tagName = e;
          },
          add: function(e, t, r) {
            if (!i.test(e)) throw new Error('invalid attribute:' + e);
            this[this.length++] = { qName: e, value: t, offset: r };
          },
          length: 0,
          getLocalName: function(e) {
            return this[e].localName;
          },
          getLocator: function(e) {
            return this[e].locator;
          },
          getQName: function(e) {
            return this[e].qName;
          },
          getURI: function(e) {
            return this[e].uri;
          },
          getValue: function(e) {
            return this[e].value;
          }
        }),
        k({}, k.prototype) instanceof k ||
          (k = function(e, t) {
            function r() {}
            for (t in ((r.prototype = t), (r = new r()), e)) r[t] = e[t];
            return r;
          }),
        (t.XMLReader = f);
    },
    function(e, t, r) {
      function n(e) {
        this.options = e || { locator: {} };
      }
      function i() {
        this.cdata = !1;
      }
      function a(e, t) {
        (t.lineNumber = e.lineNumber), (t.columnNumber = e.columnNumber);
      }
      function o(e) {
        if (e)
          return (
            '\n@' +
            (e.systemId || '') +
            '#[line:' +
            e.lineNumber +
            ',col:' +
            e.columnNumber +
            ']'
          );
      }
      function s(e, t, r) {
        return 'string' == typeof e
          ? e.substr(t, r)
          : e.length >= t + r || t ? new java.lang.String(e, t, r) + '' : e;
      }
      function u(e, t) {
        e.currentElement
          ? e.currentElement.appendChild(t)
          : e.doc.appendChild(t);
      }
      (n.prototype.parseFromString = function(e, t) {
        var r = this.options,
          n = new l(),
          a = r.domBuilder || new i(),
          s = r.errorHandler,
          u = r.locator,
          c = r.xmlns || {},
          p = { lt: '<', gt: '>', amp: '&', quot: '"', apos: "'" };
        return (
          u && a.setDocumentLocator(u),
          (n.errorHandler = (function(e, t, r) {
            if (!e) {
              if (t instanceof i) return t;
              e = t;
            }
            var n = {},
              a = e instanceof Function;
            function s(t) {
              var i = e[t];
              !i &&
                a &&
                (i =
                  2 == e.length
                    ? function(r) {
                        e(t, r);
                      }
                    : e),
                (n[t] =
                  (i &&
                    function(e) {
                      i('[xmldom ' + t + ']\t' + e + o(r));
                    }) ||
                  function() {});
            }
            return (r = r || {}), s('warning'), s('error'), s('fatalError'), n;
          })(s, a, u)),
          (n.domBuilder = r.domBuilder || a),
          /\/x?html?$/.test(t) &&
            ((p.nbsp = ''),
            (p.copy = ''),
            (c[''] = 'http://www.w3.org/1999/xhtml')),
          (c.xml = c.xml || 'http://www.w3.org/XML/1998/namespace'),
          e ? n.parse(e, c, p) : n.errorHandler.error('invalid doc source'),
          a.doc
        );
      }),
        (i.prototype = {
          startDocument: function() {
            (this.doc = new c().createDocument(null, null, null)),
              this.locator && (this.doc.documentURI = this.locator.systemId);
          },
          startElement: function(e, t, r, n) {
            var i = this.doc,
              o = i.createElementNS(e, r || t),
              s = n.length;
            u(this, o),
              (this.currentElement = o),
              this.locator && a(this.locator, o);
            for (var l = 0; l < s; l++) {
              e = n.getURI(l);
              var c = n.getValue(l),
                p = ((r = n.getQName(l)), i.createAttributeNS(e, r));
              this.locator && a(n.getLocator(l), p),
                (p.value = p.nodeValue = c),
                o.setAttributeNode(p);
            }
          },
          endElement: function(e, t, r) {
            var n = this.currentElement;
            n.tagName;
            this.currentElement = n.parentNode;
          },
          startPrefixMapping: function(e, t) {},
          endPrefixMapping: function(e) {},
          processingInstruction: function(e, t) {
            var r = this.doc.createProcessingInstruction(e, t);
            this.locator && a(this.locator, r), u(this, r);
          },
          ignorableWhitespace: function(e, t, r) {},
          characters: function(e, t, r) {
            if ((e = s.apply(this, arguments))) {
              if (this.cdata) var n = this.doc.createCDATASection(e);
              else n = this.doc.createTextNode(e);
              this.currentElement
                ? this.currentElement.appendChild(n)
                : /^\s*$/.test(e) && this.doc.appendChild(n),
                this.locator && a(this.locator, n);
            }
          },
          skippedEntity: function(e) {},
          endDocument: function() {
            this.doc.normalize();
          },
          setDocumentLocator: function(e) {
            (this.locator = e) && (e.lineNumber = 0);
          },
          comment: function(e, t, r) {
            e = s.apply(this, arguments);
            var n = this.doc.createComment(e);
            this.locator && a(this.locator, n), u(this, n);
          },
          startCDATA: function() {
            this.cdata = !0;
          },
          endCDATA: function() {
            this.cdata = !1;
          },
          startDTD: function(e, t, r) {
            var n = this.doc.implementation;
            if (n && n.createDocumentType) {
              var i = n.createDocumentType(e, t, r);
              this.locator && a(this.locator, i), u(this, i);
            }
          },
          warning: function(e) {
            console.warn('[xmldom warning]\t' + e, o(this.locator));
          },
          error: function(e) {
            console.error('[xmldom error]\t' + e, o(this.locator));
          },
          fatalError: function(e) {
            throw (console.error('[xmldom fatalError]\t' + e, o(this.locator)),
            e);
          }
        }),
        'endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl'.replace(
          /\w+/g,
          function(e) {
            i.prototype[e] = function() {
              return null;
            };
          }
        );
      var l = r(14).XMLReader,
        c = (t.DOMImplementation = r(3).DOMImplementation);
      (t.XMLSerializer = r(3).XMLSerializer), (t.DOMParser = n);
    },
    function(e, t) {
      e.exports = require('https');
    },
    function(e, t) {
      e.exports = require('http');
    },
    function(e, t) {
      e.exports = require('fs');
    },
    function(e, t) {
      e.exports = require('url');
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.NodeURLHandler = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = l(r(19)),
        a = l(r(18)),
        o = l(r(17)),
        s = l(r(16)),
        u = r(15);
      function l(e) {
        return e && e.__esModule ? e : { default: e };
      }
      t.NodeURLHandler = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
        }
        return (
          n(e, [
            {
              key: 'get',
              value: function(e, t, r) {
                var n =
                  'https:' === (e = i.default.parse(e)).protocol
                    ? s.default
                    : o.default;
                if ('file:' === e.protocol)
                  a.default.readFile(e.pathname, 'utf8', function(e, t) {
                    if (e) return r(e);
                    var n = new u.DOMParser().parseFromString(t);
                    r(null, n);
                  });
                else {
                  var l = void 0,
                    c = '',
                    p = n.get(e.href, function(e) {
                      e.on('data', function(e) {
                        var r = void 0;
                        (c += e),
                          clearTimeout(r),
                          (r = setTimeout(h, t.timeout || 12e4));
                      }),
                        e.on('end', function() {
                          clearTimeout(l);
                          var e = new u.DOMParser().parseFromString(c);
                          r(null, e);
                        });
                    });
                  p.on('error', function(e) {
                    clearTimeout(l), r(e);
                  });
                  var h = (function(e) {
                    return function() {
                      return e.abort();
                    };
                  })(p);
                  l = setTimeout(h, t.timeout || 12e4);
                }
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      var n = (function() {
        function e(e, t) {
          for (var r = 0; r < t.length; r++) {
            var n = t[r];
            (n.enumerable = n.enumerable || !1),
              (n.configurable = !0),
              'value' in n && (n.writable = !0),
              Object.defineProperty(e, n.key, n);
          }
        }
        return function(t, r, n) {
          return r && e(t.prototype, r), n && e(t, n), t;
        };
      })();
      t.FlashURLHandler = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
        }
        return (
          n(e, [
            {
              key: 'xdr',
              value: function() {
                var e = void 0;
                return window.XDomainRequest && (e = new XDomainRequest()), e;
              }
            },
            {
              key: 'supported',
              value: function() {
                return !!this.xdr();
              }
            },
            {
              key: 'get',
              value: function(e, t, r) {
                var n =
                  'function' == typeof window.ActiveXObject
                    ? new window.ActiveXObject('Microsoft.XMLDOM')
                    : void 0;
                if (!n)
                  return r(
                    new Error(
                      'FlashURLHandler: Microsoft.XMLDOM format not supported'
                    )
                  );
                n.async = !1;
                var i = this.xdr();
                i.open('GET', e),
                  (i.timeout = t.timeout || 0),
                  (i.withCredentials = t.withCredentials || !1),
                  i.send(),
                  (i.onprogress = function() {}),
                  (i.onload = function() {
                    n.loadXML(i.responseText), r(null, n);
                  });
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.URLHandler = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(21),
        a = r(20),
        o = r(13);
      t.URLHandler = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.flash = new i.FlashURLHandler()),
            (this.node = new a.NodeURLHandler()),
            (this.xhr = new o.XHRURLHandler());
        }
        return (
          n(e, [
            {
              key: 'get',
              value: function(e, t, r) {
                if (
                  (r || ('function' == typeof t && (r = t), (t = {})),
                  t.response)
                ) {
                  var n = t.response;
                  return delete t.response, r(null, n);
                }
                return t.urlhandler && t.urlhandler.supported()
                  ? t.urlhandler.get(e, t, r)
                  : 'undefined' == typeof window || null === window
                    ? this.node.get(e, t, r)
                    : this.xhr.supported()
                      ? this.xhr.get(e, t, r)
                      : this.flash.supported()
                        ? this.flash.get(e, t, r)
                        : r(
                            new Error(
                              'Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler'
                            )
                          );
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.CreativeNonLinear = void 0);
      var n = r(2);
      t.CreativeNonLinear = (function(e) {
        function t() {
          var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, t);
          var r = (function(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ('object' != typeof t && 'function' != typeof t)
              ? e
              : t;
          })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
          return (r.type = 'nonlinear'), (r.variations = []), r;
        }
        return (
          (function(e, t) {
            if ('function' != typeof t && null !== t)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          })(t, n.Creative),
          t
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.CreativeNonLinearParser = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(23),
        a = r(5),
        o = r(0);
      t.CreativeNonLinearParser = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.parserUtils = new o.ParserUtils());
        }
        return (
          n(e, [
            {
              key: 'parse',
              value: function(e, t) {
                var r = this,
                  n = new i.CreativeNonLinear(t);
                return (
                  this.parserUtils
                    .childrenByName(e, 'TrackingEvents')
                    .forEach(function(e) {
                      var t = void 0,
                        i = void 0;
                      r.parserUtils
                        .childrenByName(e, 'Tracking')
                        .forEach(function(e) {
                          (t = e.getAttribute('event')),
                            (i = r.parserUtils.parseNodeText(e)),
                            t &&
                              i &&
                              (null == n.trackingEvents[t] &&
                                (n.trackingEvents[t] = []),
                              n.trackingEvents[t].push(i));
                        });
                    }),
                  this.parserUtils
                    .childrenByName(e, 'NonLinear')
                    .forEach(function(e) {
                      var t = new a.NonLinearAd();
                      (t.id = e.getAttribute('id') || null),
                        (t.width = e.getAttribute('width')),
                        (t.height = e.getAttribute('height')),
                        (t.expandedWidth = e.getAttribute('expandedWidth')),
                        (t.expandedHeight = e.getAttribute('expandedHeight')),
                        (t.scalable = r.parserUtils.parseBoolean(
                          e.getAttribute('scalable')
                        )),
                        (t.maintainAspectRatio = r.parserUtils.parseBoolean(
                          e.getAttribute('maintainAspectRatio')
                        )),
                        (t.minSuggestedDuration = r.parserUtils.parseDuration(
                          e.getAttribute('minSuggestedDuration')
                        )),
                        (t.apiFramework = e.getAttribute('apiFramework')),
                        r.parserUtils
                          .childrenByName(e, 'HTMLResource')
                          .forEach(function(e) {
                            (t.type =
                              e.getAttribute('creativeType') || 'text/html'),
                              (t.htmlResource = r.parserUtils.parseNodeText(e));
                          }),
                        r.parserUtils
                          .childrenByName(e, 'IFrameResource')
                          .forEach(function(e) {
                            (t.type = e.getAttribute('creativeType') || 0),
                              (t.iframeResource = r.parserUtils.parseNodeText(
                                e
                              ));
                          }),
                        r.parserUtils
                          .childrenByName(e, 'StaticResource')
                          .forEach(function(e) {
                            (t.type = e.getAttribute('creativeType') || 0),
                              (t.staticResource = r.parserUtils.parseNodeText(
                                e
                              ));
                          });
                      var i = r.parserUtils.childByName(e, 'AdParameters');
                      i && (t.adParameters = r.parserUtils.parseNodeText(i)),
                        (t.nonlinearClickThroughURLTemplate = r.parserUtils.parseNodeText(
                          r.parserUtils.childByName(e, 'NonLinearClickThrough')
                        )),
                        r.parserUtils
                          .childrenByName(e, 'NonLinearClickTracking')
                          .forEach(function(e) {
                            t.nonlinearClickTrackingURLTemplates.push(
                              r.parserUtils.parseNodeText(e)
                            );
                          }),
                        n.variations.push(t);
                    }),
                  n
                );
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.MediaFile = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.id = null),
          (this.fileURL = null),
          (this.deliveryType = 'progressive'),
          (this.mimeType = null),
          (this.codec = null),
          (this.bitrate = 0),
          (this.minBitrate = 0),
          (this.maxBitrate = 0),
          (this.width = 0),
          (this.height = 0),
          (this.apiFramework = null),
          (this.scalable = null),
          (this.maintainAspectRatio = null);
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.Icon = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.program = null),
          (this.height = 0),
          (this.width = 0),
          (this.xPosition = 0),
          (this.yPosition = 0),
          (this.apiFramework = null),
          (this.offset = null),
          (this.duration = 0),
          (this.type = null),
          (this.staticResource = null),
          (this.htmlResource = null),
          (this.iframeResource = null),
          (this.iconClickThroughURLTemplate = null),
          (this.iconClickTrackingURLTemplates = []),
          (this.iconViewTrackingURLTemplate = null);
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.CreativeLinearParser = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(6),
        a = r(26),
        o = r(25),
        s = r(0);
      t.CreativeLinearParser = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.parserUtils = new s.ParserUtils());
        }
        return (
          n(e, [
            {
              key: 'parse',
              value: function(e, t) {
                var r = this,
                  n = void 0,
                  s = new i.CreativeLinear(t);
                s.duration = this.parserUtils.parseDuration(
                  this.parserUtils.parseNodeText(
                    this.parserUtils.childByName(e, 'Duration')
                  )
                );
                var u = e.getAttribute('skipoffset');
                if (null == u) s.skipDelay = null;
                else if ('%' === u.charAt(u.length - 1) && -1 !== s.duration) {
                  var l = parseInt(u, 10);
                  s.skipDelay = s.duration * (l / 100);
                } else s.skipDelay = this.parserUtils.parseDuration(u);
                var c = this.parserUtils.childByName(e, 'VideoClicks');
                c &&
                  ((s.videoClickThroughURLTemplate = this.parserUtils.parseNodeText(
                    this.parserUtils.childByName(c, 'ClickThrough')
                  )),
                  this.parserUtils
                    .childrenByName(c, 'ClickTracking')
                    .forEach(function(e) {
                      s.videoClickTrackingURLTemplates.push(
                        r.parserUtils.parseNodeText(e)
                      );
                    }),
                  this.parserUtils
                    .childrenByName(c, 'CustomClick')
                    .forEach(function(e) {
                      s.videoCustomClickURLTemplates.push(
                        r.parserUtils.parseNodeText(e)
                      );
                    }));
                var p = this.parserUtils.childByName(e, 'AdParameters');
                p && (s.adParameters = this.parserUtils.parseNodeText(p)),
                  this.parserUtils
                    .childrenByName(e, 'TrackingEvents')
                    .forEach(function(e) {
                      r.parserUtils
                        .childrenByName(e, 'Tracking')
                        .forEach(function(e) {
                          var t = e.getAttribute('event'),
                            i = r.parserUtils.parseNodeText(e);
                          if (t && i) {
                            if ('progress' === t) {
                              if (!(n = e.getAttribute('offset'))) return;
                              t =
                                '%' === n.charAt(n.length - 1)
                                  ? 'progress-' + n
                                  : 'progress-' +
                                    Math.round(r.parserUtils.parseDuration(n));
                            }
                            null == s.trackingEvents[t] &&
                              (s.trackingEvents[t] = []),
                              s.trackingEvents[t].push(i);
                          }
                        });
                    }),
                  this.parserUtils
                    .childrenByName(e, 'MediaFiles')
                    .forEach(function(e) {
                      r.parserUtils
                        .childrenByName(e, 'MediaFile')
                        .forEach(function(e) {
                          var t = new o.MediaFile();
                          (t.id = e.getAttribute('id')),
                            (t.fileURL = r.parserUtils.parseNodeText(e)),
                            (t.deliveryType = e.getAttribute('delivery')),
                            (t.codec = e.getAttribute('codec')),
                            (t.mimeType = e.getAttribute('type')),
                            (t.apiFramework = e.getAttribute('apiFramework')),
                            (t.bitrate = parseInt(
                              e.getAttribute('bitrate') || 0
                            )),
                            (t.minBitrate = parseInt(
                              e.getAttribute('minBitrate') || 0
                            )),
                            (t.maxBitrate = parseInt(
                              e.getAttribute('maxBitrate') || 0
                            )),
                            (t.width = parseInt(e.getAttribute('width') || 0)),
                            (t.height = parseInt(
                              e.getAttribute('height') || 0
                            ));
                          var n = e.getAttribute('scalable');
                          n &&
                            'string' == typeof n &&
                            ('true' === (n = n.toLowerCase())
                              ? (t.scalable = !0)
                              : 'false' === n && (t.scalable = !1));
                          var i = e.getAttribute('maintainAspectRatio');
                          i &&
                            'string' == typeof i &&
                            ('true' === (i = i.toLowerCase())
                              ? (t.maintainAspectRatio = !0)
                              : 'false' === i && (t.maintainAspectRatio = !1)),
                            s.mediaFiles.push(t);
                        });
                    });
                var h = this.parserUtils.childByName(e, 'Icons');
                return (
                  h &&
                    this.parserUtils
                      .childrenByName(h, 'Icon')
                      .forEach(function(e) {
                        var t = new a.Icon();
                        (t.program = e.getAttribute('program')),
                          (t.height = parseInt(e.getAttribute('height') || 0)),
                          (t.width = parseInt(e.getAttribute('width') || 0)),
                          (t.xPosition = r.parseXPosition(
                            e.getAttribute('xPosition')
                          )),
                          (t.yPosition = r.parseYPosition(
                            e.getAttribute('yPosition')
                          )),
                          (t.apiFramework = e.getAttribute('apiFramework')),
                          (t.offset = r.parserUtils.parseDuration(
                            e.getAttribute('offset')
                          )),
                          (t.duration = r.parserUtils.parseDuration(
                            e.getAttribute('duration')
                          )),
                          r.parserUtils
                            .childrenByName(e, 'HTMLResource')
                            .forEach(function(e) {
                              (t.type =
                                e.getAttribute('creativeType') || 'text/html'),
                                (t.htmlResource = r.parserUtils.parseNodeText(
                                  e
                                ));
                            }),
                          r.parserUtils
                            .childrenByName(e, 'IFrameResource')
                            .forEach(function(e) {
                              (t.type = e.getAttribute('creativeType') || 0),
                                (t.iframeResource = r.parserUtils.parseNodeText(
                                  e
                                ));
                            }),
                          r.parserUtils
                            .childrenByName(e, 'StaticResource')
                            .forEach(function(e) {
                              (t.type = e.getAttribute('creativeType') || 0),
                                (t.staticResource = r.parserUtils.parseNodeText(
                                  e
                                ));
                            });
                        var n = r.parserUtils.childByName(e, 'IconClicks');
                        n &&
                          ((t.iconClickThroughURLTemplate = r.parserUtils.parseNodeText(
                            r.parserUtils.childByName(n, 'IconClickThrough')
                          )),
                          r.parserUtils
                            .childrenByName(n, 'IconClickTracking')
                            .forEach(function(e) {
                              t.iconClickTrackingURLTemplates.push(
                                r.parserUtils.parseNodeText(e)
                              );
                            })),
                          (t.iconViewTrackingURLTemplate = r.parserUtils.parseNodeText(
                            r.parserUtils.childByName(e, 'IconViewTracking')
                          )),
                          s.icons.push(t);
                      }),
                  s
                );
              }
            },
            {
              key: 'parseXPosition',
              value: function(e) {
                return ['left', 'right'].includes(e) ? e : parseInt(e || 0);
              }
            },
            {
              key: 'parseYPosition',
              value: function(e) {
                return ['top', 'bottom'].includes(e) ? e : parseInt(e || 0);
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.CreativeCompanion = void 0);
      var n = r(2);
      t.CreativeCompanion = (function(e) {
        function t() {
          var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, t);
          var r = (function(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ('object' != typeof t && 'function' != typeof t)
              ? e
              : t;
          })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
          return (r.type = 'companion'), (r.variations = []), r;
        }
        return (
          (function(e, t) {
            if ('function' != typeof t && null !== t)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          })(t, n.Creative),
          t
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.CreativeCompanionParser = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(7),
        a = r(28),
        o = r(0);
      t.CreativeCompanionParser = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.parserUtils = new o.ParserUtils());
        }
        return (
          n(e, [
            {
              key: 'parse',
              value: function(e, t) {
                var r = this,
                  n = new a.CreativeCompanion(t);
                return (
                  this.parserUtils
                    .childrenByName(e, 'Companion')
                    .forEach(function(e) {
                      var t = new i.CompanionAd();
                      (t.id = e.getAttribute('id') || null),
                        (t.width = e.getAttribute('width')),
                        (t.height = e.getAttribute('height')),
                        (t.companionClickTrackingURLTemplates = []),
                        r.parserUtils
                          .childrenByName(e, 'HTMLResource')
                          .forEach(function(e) {
                            (t.type =
                              e.getAttribute('creativeType') || 'text/html'),
                              (t.htmlResource = r.parserUtils.parseNodeText(e));
                          }),
                        r.parserUtils
                          .childrenByName(e, 'IFrameResource')
                          .forEach(function(e) {
                            (t.type = e.getAttribute('creativeType') || 0),
                              (t.iframeResource = r.parserUtils.parseNodeText(
                                e
                              ));
                          }),
                        r.parserUtils
                          .childrenByName(e, 'StaticResource')
                          .forEach(function(n) {
                            (t.type = n.getAttribute('creativeType') || 0),
                              r.parserUtils
                                .childrenByName(e, 'AltText')
                                .forEach(function(e) {
                                  t.altText = r.parserUtils.parseNodeText(e);
                                }),
                              (t.staticResource = r.parserUtils.parseNodeText(
                                n
                              ));
                          }),
                        r.parserUtils
                          .childrenByName(e, 'TrackingEvents')
                          .forEach(function(e) {
                            r.parserUtils
                              .childrenByName(e, 'Tracking')
                              .forEach(function(e) {
                                var n = e.getAttribute('event'),
                                  i = r.parserUtils.parseNodeText(e);
                                n &&
                                  i &&
                                  (null == t.trackingEvents[n] &&
                                    (t.trackingEvents[n] = []),
                                  t.trackingEvents[n].push(i));
                              });
                          }),
                        r.parserUtils
                          .childrenByName(e, 'CompanionClickTracking')
                          .forEach(function(e) {
                            t.companionClickTrackingURLTemplates.push(
                              r.parserUtils.parseNodeText(e)
                            );
                          }),
                        (t.companionClickThroughURLTemplate = r.parserUtils.parseNodeText(
                          r.parserUtils.childByName(e, 'CompanionClickThrough')
                        )),
                        (t.companionClickTrackingURLTemplate = r.parserUtils.parseNodeText(
                          r.parserUtils.childByName(e, 'CompanionClickTracking')
                        )),
                        n.variations.push(t);
                    }),
                  n
                );
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.AdExtensionChild = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.name = null),
          (this.value = null),
          (this.attributes = {});
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.AdExtension = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.attributes = {}),
          (this.children = []);
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 });
      t.Ad = function e() {
        !(function(e, t) {
          if (!(e instanceof t))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (this.id = null),
          (this.sequence = null),
          (this.system = null),
          (this.title = null),
          (this.description = null),
          (this.advertiser = null),
          (this.pricing = null),
          (this.survey = null),
          (this.errorURLTemplates = []),
          (this.impressionURLTemplates = []),
          (this.creatives = []),
          (this.extensions = []);
      };
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.AdParser = void 0);
      var n = (function() {
          function e(e, t) {
            for (var r = 0; r < t.length; r++) {
              var n = t[r];
              (n.enumerable = n.enumerable || !1),
                (n.configurable = !0),
                'value' in n && (n.writable = !0),
                Object.defineProperty(e, n.key, n);
            }
          }
          return function(t, r, n) {
            return r && e(t.prototype, r), n && e(t, n), t;
          };
        })(),
        i = r(32),
        a = r(31),
        o = r(30),
        s = r(29),
        u = r(27),
        l = r(24),
        c = r(0);
      t.AdParser = (function() {
        function e() {
          !(function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            (this.creativeCompanionParser = new s.CreativeCompanionParser()),
            (this.creativeNonLinearParser = new l.CreativeNonLinearParser()),
            (this.creativeLinearParser = new u.CreativeLinearParser()),
            (this.parserUtils = new c.ParserUtils());
        }
        return (
          n(e, [
            {
              key: 'parse',
              value: function(e) {
                var t = e.childNodes;
                for (var r in t) {
                  var n = t[r];
                  if (['Wrapper', 'InLine'].includes(n.nodeName)) {
                    if (
                      (this.parserUtils.copyNodeAttribute('id', e, n),
                      this.parserUtils.copyNodeAttribute('sequence', e, n),
                      'Wrapper' === n.nodeName)
                    )
                      return this.parseWrapper(n);
                    if ('InLine' === n.nodeName) return this.parseInLine(n);
                  }
                }
              }
            },
            {
              key: 'parseInLine',
              value: function(e) {
                var t = this,
                  r = e.childNodes,
                  n = new i.Ad();
                for (var a in ((n.id = e.getAttribute('id') || null),
                (n.sequence = e.getAttribute('sequence') || null),
                r)) {
                  var o = r[a];
                  switch (o.nodeName) {
                    case 'Error':
                      n.errorURLTemplates.push(
                        this.parserUtils.parseNodeText(o)
                      );
                      break;
                    case 'Impression':
                      n.impressionURLTemplates.push(
                        this.parserUtils.parseNodeText(o)
                      );
                      break;
                    case 'Creatives':
                      this.parserUtils
                        .childrenByName(o, 'Creative')
                        .forEach(function(e) {
                          var r = {
                            id: e.getAttribute('id') || null,
                            adId: t.parseCreativeAdIdAttribute(e),
                            sequence: e.getAttribute('sequence') || null,
                            apiFramework: e.getAttribute('apiFramework') || null
                          };
                          for (var i in e.childNodes) {
                            var a = e.childNodes[i];
                            switch (a.nodeName) {
                              case 'Linear':
                                var o = t.creativeLinearParser.parse(a, r);
                                o && n.creatives.push(o);
                                break;
                              case 'NonLinearAds':
                                var s = t.creativeNonLinearParser.parse(a, r);
                                s && n.creatives.push(s);
                                break;
                              case 'CompanionAds':
                                var u = t.creativeCompanionParser.parse(a, r);
                                u && n.creatives.push(u);
                            }
                          }
                        });
                      break;
                    case 'Extensions':
                      this.parseExtensions(
                        n.extensions,
                        this.parserUtils.childrenByName(o, 'Extension')
                      );
                      break;
                    case 'AdSystem':
                      n.system = {
                        value: this.parserUtils.parseNodeText(o),
                        version: o.getAttribute('version') || null
                      };
                      break;
                    case 'AdTitle':
                      n.title = this.parserUtils.parseNodeText(o);
                      break;
                    case 'Description':
                      n.description = this.parserUtils.parseNodeText(o);
                      break;
                    case 'Advertiser':
                      n.advertiser = this.parserUtils.parseNodeText(o);
                      break;
                    case 'Pricing':
                      n.pricing = {
                        value: this.parserUtils.parseNodeText(o),
                        model: o.getAttribute('model') || null,
                        currency: o.getAttribute('currency') || null
                      };
                      break;
                    case 'Survey':
                      n.survey = this.parserUtils.parseNodeText(o);
                  }
                }
                return n;
              }
            },
            {
              key: 'parseWrapper',
              value: function(e) {
                var t = this.parseInLine(e),
                  r = this.parserUtils.childByName(e, 'VASTAdTagURI');
                if (
                  (r
                    ? (t.nextWrapperURL = this.parserUtils.parseNodeText(r))
                    : (r = this.parserUtils.childByName(e, 'VASTAdTagURL')) &&
                      (t.nextWrapperURL = this.parserUtils.parseNodeText(
                        this.parserUtils.childByName(r, 'URL')
                      )),
                  t.creatives.forEach(function(e) {
                    if (['linear', 'nonlinear'].includes(e.type)) {
                      if (e.trackingEvents) {
                        t.trackingEvents || (t.trackingEvents = {}),
                          t.trackingEvents[e.type] ||
                            (t.trackingEvents[e.type] = {});
                        var r = function(r) {
                          var n = e.trackingEvents[r];
                          t.trackingEvents[e.type][r] ||
                            (t.trackingEvents[e.type][r] = []),
                            n.forEach(function(n) {
                              t.trackingEvents[e.type][r].push(n);
                            });
                        };
                        for (var n in e.trackingEvents) r(n);
                      }
                      e.videoClickTrackingURLTemplates &&
                        (t.videoClickTrackingURLTemplates ||
                          (t.videoClickTrackingURLTemplates = []),
                        e.videoClickTrackingURLTemplates.forEach(function(e) {
                          t.videoClickTrackingURLTemplates.push(e);
                        })),
                        e.videoClickThroughURLTemplate &&
                          (t.videoClickThroughURLTemplate =
                            e.videoClickThroughURLTemplate),
                        e.videoCustomClickURLTemplates &&
                          (t.videoCustomClickURLTemplates ||
                            (t.videoCustomClickURLTemplates = []),
                          e.videoCustomClickURLTemplates.forEach(function(e) {
                            t.videoCustomClickURLTemplates.push(e);
                          }));
                    }
                  }),
                  t.nextWrapperURL)
                )
                  return t;
              }
            },
            {
              key: 'parseExtensions',
              value: function(e, t) {
                var r = this;
                t.forEach(function(t) {
                  var n = new a.AdExtension(),
                    i = t.attributes,
                    s = t.childNodes;
                  if (t.attributes)
                    for (var u in i) {
                      var l = i[u];
                      l.nodeName &&
                        l.nodeValue &&
                        (n.attributes[l.nodeName] = l.nodeValue);
                    }
                  for (var c in s) {
                    var p = s[c],
                      h = r.parserUtils.parseNodeText(p);
                    if ('#comment' !== p.nodeName && '' !== h) {
                      var f = new o.AdExtensionChild();
                      if (
                        ((f.name = p.nodeName), (f.value = h), p.attributes)
                      ) {
                        var d = p.attributes;
                        for (var m in d) {
                          var v = d[m];
                          f.attributes[v.nodeName] = v.nodeValue;
                        }
                      }
                      n.children.push(f);
                    }
                  }
                  e.push(n);
                });
              }
            },
            {
              key: 'parseCreativeAdIdAttribute',
              value: function(e) {
                return (
                  e.getAttribute('AdID') ||
                  e.getAttribute('adID') ||
                  e.getAttribute('adId') ||
                  null
                );
              }
            }
          ]),
          e
        );
      })();
    },
    function(e, t, r) {
      'use strict';
      Object.defineProperty(t, '__esModule', { value: !0 }),
        (t.VASTTracker = t.VASTParser = t.VASTClient = void 0);
      var n = r(8),
        i = r(11),
        a = r(9);
      (t.VASTClient = i.VASTClient),
        (t.VASTParser = n.VASTParser),
        (t.VASTTracker = a.VASTTracker);
    }
  ]);
});
